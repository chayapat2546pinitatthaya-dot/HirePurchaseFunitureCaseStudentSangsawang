{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\sangsawang_furniture_project-master\\\\client\\\\src\\\\pages\\\\Cards.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Badge from 'react-bootstrap/Badge';\nimport Table from 'react-bootstrap/Table';\nimport Form from 'react-bootstrap/Form';\nimport Alert from 'react-bootstrap/Alert';\nimport Spinner from 'react-bootstrap/Spinner';\nimport Image from 'react-bootstrap/Image';\nimport axios from 'axios';\nimport './Cards.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ORDER_STATUS_MAP = {\n  pending: {\n    label: 'รออนุมัติ',\n    variant: 'warning'\n  },\n  awaiting_payment: {\n    label: 'รอชำระเงิน',\n    variant: 'info'\n  },\n  approved: {\n    label: 'อนุมัติแล้ว',\n    variant: 'success'\n  },\n  waiting_for_delivery: {\n    label: 'รอจัดส่ง',\n    variant: 'primary'\n  },\n  completed: {\n    label: 'ส่งมอบสำเร็จ',\n    variant: 'success'\n  },\n  cancelled: {\n    label: 'ยกเลิกโดยผู้ดูแล',\n    variant: 'danger'\n  },\n  cancelled_by_customer: {\n    label: 'ยกเลิก',\n    variant: 'danger'\n  }\n};\nconst formatCurrency = value => {\n  if (value == null) return '-';\n  return `฿${parseFloat(value).toLocaleString('th-TH')}`;\n};\nconst formatDate = value => {\n  if (!value) return '-';\n  const date = new Date(value);\n  if (Number.isNaN(date.getTime())) return '-';\n  return date.toLocaleDateString('th-TH');\n};\nconst formatShippingAddress = value => {\n  if (!value) {\n    return '';\n  }\n  if (typeof value === 'string') {\n    const trimmed = value.trim();\n    if (!trimmed) {\n      return '';\n    }\n    if (trimmed.startsWith('{')) {\n      try {\n        return formatShippingAddress(JSON.parse(trimmed));\n      } catch (error) {\n        console.warn('Failed to parse shipping address JSON:', trimmed, error);\n        return trimmed;\n      }\n    }\n    return trimmed;\n  }\n  if (typeof value === 'object') {\n    const recipientName = [value.recipientName, value.recipientSurname].filter(Boolean).join(' ').trim();\n    const lines = [];\n    if (recipientName) {\n      lines.push(recipientName);\n    }\n    if (value.phone) {\n      lines.push(`โทร: ${value.phone}`);\n    }\n    if (value.address) {\n      lines.push(value.address);\n    }\n    return lines.join('\\n');\n  }\n  return '';\n};\n\n/**\n * คำนวณจำนวนเงินผ่อนชำระแต่ละงวดให้ถูกต้องตามหลักบัญชี\n */\nconst calculateInstallmentAmounts = (totalAmount, periods) => {\n  const total = Number(totalAmount);\n  const numPeriods = Number(periods);\n  if (!Number.isFinite(total) || total <= 0 || !Number.isFinite(numPeriods) || numPeriods <= 0) {\n    return [];\n  }\n  if (numPeriods === 1) {\n    return [total];\n  }\n  const averagePerMonth = total / numPeriods;\n  const regularAmount = Math.ceil(averagePerMonth / 10) * 10;\n  const amounts = [];\n  for (let i = 1; i < numPeriods; i++) {\n    amounts.push(regularAmount);\n  }\n  const regularTotal = regularAmount * (numPeriods - 1);\n  const lastAmount = total - regularTotal;\n  amounts.push(lastAmount);\n  return amounts;\n};\nconst isInstallmentOrder = order => {\n  if (!order) return false;\n  const periods = Number(order.installment_periods) || 0;\n  const monthlyPayment = Number(order.monthly_payment) || 0;\n  const method = order.payment_method ? String(order.payment_method).toLowerCase() : '';\n  if (method.includes('installment')) {\n    return true;\n  }\n  if (method.includes('cash')) {\n    return false;\n  }\n  if (periods > 1) {\n    return true;\n  }\n  return periods >= 1 && monthlyPayment > 0;\n};\nexport default function Cards() {\n  _s();\n  var _orderDetail$installm;\n  const [orders, setOrders] = useState([]);\n  const [selectedOrderId, setSelectedOrderId] = useState(null);\n  const [orderDetail, setOrderDetail] = useState(null);\n  const [isOrdersLoading, setIsOrdersLoading] = useState(true);\n  const [isDetailLoading, setIsDetailLoading] = useState(false);\n  const [ordersError, setOrdersError] = useState('');\n  const [detailError, setDetailError] = useState('');\n  useEffect(() => {\n    const fetchOrders = async () => {\n      setIsOrdersLoading(true);\n      setOrdersError('');\n      try {\n        const response = await axios.get('/api/customer/orders');\n        const rawData = Array.isArray(response.data) ? response.data : [];\n        const filtered = rawData.filter(order => order.order_status !== 'cancelled_by_customer' && order.order_status !== 'cancelled' && isInstallmentOrder(order));\n        if (filtered.length === 0) {\n          setOrders([]);\n          setSelectedOrderId(null);\n          setOrdersError(rawData.length > 0 ? 'ยังไม่มีคำสั่งซื้อที่อยู่ในแผนผ่อนชำระ (รายการที่ยกเลิกจะไม่แสดงในหน้านี้)' : 'ยังไม่มีคำสั่งซื้อ');\n          return;\n        }\n        setOrders(filtered);\n        setOrdersError('');\n        setSelectedOrderId(filtered[0].order_id);\n      } catch (error) {\n        var _error$response, _error$response$data;\n        console.error('Error fetching customer orders:', error);\n        setOrdersError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'ไม่สามารถโหลดข้อมูลคำสั่งซื้อได้');\n      } finally {\n        setIsOrdersLoading(false);\n      }\n    };\n    fetchOrders();\n  }, []);\n  useEffect(() => {\n    if (!selectedOrderId) {\n      setOrderDetail(null);\n      return;\n    }\n    const fetchOrderDetail = async () => {\n      setIsDetailLoading(true);\n      setDetailError('');\n      try {\n        const response = await axios.get(`/api/orders/${selectedOrderId}`);\n        setOrderDetail(response.data);\n      } catch (error) {\n        var _error$response2, _error$response2$data;\n        console.error('Error fetching order detail:', error);\n        setDetailError(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || 'ไม่สามารถโหลดรายละเอียดคำสั่งซื้อได้');\n        setOrderDetail(null);\n      } finally {\n        setIsDetailLoading(false);\n      }\n    };\n    fetchOrderDetail();\n  }, [selectedOrderId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cards-page\",\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"cards-contract__header-only\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"cards-contract__eyebrow\",\n            children: \"\\u0E41\\u0E1C\\u0E19\\u0E01\\u0E32\\u0E23\\u0E1C\\u0E48\\u0E2D\\u0E19\\u0E0A\\u0E33\\u0E23\\u0E30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30\\u0E01\\u0E32\\u0E23\\u0E1C\\u0E48\\u0E2D\\u0E19\\u0E0A\\u0E33\\u0E23\\u0E30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-muted\",\n            children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E04\\u0E33\\u0E2A\\u0E31\\u0E48\\u0E07\\u0E0B\\u0E37\\u0E49\\u0E2D\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E14\\u0E39\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\\u0E01\\u0E32\\u0E23\\u0E1C\\u0E48\\u0E2D\\u0E19\\u0E0A\\u0E33\\u0E23\\u0E30\\u0E41\\u0E15\\u0E48\\u0E25\\u0E30\\u0E07\\u0E27\\u0E14\\u0E44\\u0E14\\u0E49\\u0E17\\u0E35\\u0E48\\u0E19\\u0E35\\u0E48\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cards-contract__selector-shell\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Select, {\n            value: selectedOrderId !== null && selectedOrderId !== void 0 ? selectedOrderId : '',\n            onChange: event => setSelectedOrderId(event.target.value || null),\n            disabled: isOrdersLoading || orders.length === 0,\n            className: \"cards-contract__selector\",\n            children: [orders.length === 0 && /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E04\\u0E33\\u0E2A\\u0E31\\u0E48\\u0E07\\u0E0B\\u0E37\\u0E49\\u0E2D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 39\n            }, this), orders.map(order => {\n              var _order$items;\n              const primaryItem = (_order$items = order.items) === null || _order$items === void 0 ? void 0 : _order$items[0];\n              return /*#__PURE__*/_jsxDEV(\"option\", {\n                value: order.order_id,\n                children: [\"#\", order.order_id, \" \\u2022 \", (primaryItem === null || primaryItem === void 0 ? void 0 : primaryItem.product_name) || 'ไม่ระบุสินค้า']\n              }, order.order_id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 19\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cards-contract__selector-display\",\n            children: isOrdersLoading ? /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 17\n            }, this) : selectedOrderId ? (_selectedOrder$items => {\n              const selectedOrder = orders.find(order => order.order_id === Number(selectedOrderId));\n              const primaryItem = selectedOrder === null || selectedOrder === void 0 ? void 0 : (_selectedOrder$items = selectedOrder.items) === null || _selectedOrder$items === void 0 ? void 0 : _selectedOrder$items[0];\n              const statusKey = orderDetail === null || orderDetail === void 0 ? void 0 : orderDetail.order_status;\n              const statusConfig = ORDER_STATUS_MAP[statusKey] || {\n                label: statusKey || '-',\n                variant: 'secondary'\n              };\n              const isCancelled = statusKey === 'cancelled' || statusKey === 'cancelled_by_customer';\n              const isPending = statusKey === 'pending';\n              const isAwaitingPayment = statusKey === 'awaiting_payment';\n              const badgeClasses = ['cards-status-badge', isCancelled ? 'cards-status-badge--cancelled' : '', isPending ? 'cards-status-badge--pending' : '', isAwaitingPayment ? 'cards-status-badge--awaiting' : ''].filter(Boolean).join(' ');\n              return /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"selector-product\",\n                  children: [/*#__PURE__*/_jsxDEV(Image, {\n                    src: (primaryItem === null || primaryItem === void 0 ? void 0 : primaryItem.product_image) || 'https://via.placeholder.com/80',\n                    alt: (primaryItem === null || primaryItem === void 0 ? void 0 : primaryItem.product_name) || 'สินค้า',\n                    rounded: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 254,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: (primaryItem === null || primaryItem === void 0 ? void 0 : primaryItem.product_name) || `คำสั่งซื้อ #${(selectedOrder === null || selectedOrder === void 0 ? void 0 : selectedOrder.order_id) || '-'}`\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 260,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [formatDate(selectedOrder === null || selectedOrder === void 0 ? void 0 : selectedOrder.order_date), \" \\u2022 \", formatCurrency(selectedOrder === null || selectedOrder === void 0 ? void 0 : selectedOrder.total_amount)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 261,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 259,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                  bg: statusConfig.variant,\n                  className: badgeClasses,\n                  children: statusConfig.label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true);\n            })() : /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E04\\u0E33\\u0E2A\\u0E31\\u0E48\\u0E07\\u0E0B\\u0E37\\u0E49\\u0E2D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), ordersError && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        className: \"cards-contract__alert\",\n        children: ordersError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 11\n      }, this), orderDetail && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cards-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cards-summary__item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"\\u0E22\\u0E2D\\u0E14\\u0E23\\u0E27\\u0E21\\u0E2A\\u0E31\\u0E0D\\u0E0D\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: formatCurrency(orderDetail.total_amount)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cards-summary__item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E07\\u0E27\\u0E14\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: orderDetail.installment_periods || '-'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cards-summary__item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"\\u0E07\\u0E27\\u0E14\\u0E22\\u0E2D\\u0E14\\u0E1B\\u0E31\\u0E08\\u0E08\\u0E38\\u0E1A\\u0E31\\u0E19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: formatCurrency(orderDetail.monthly_payment)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cards-summary__item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"\\u0E17\\u0E35\\u0E48\\u0E2D\\u0E22\\u0E39\\u0E48\\u0E08\\u0E31\\u0E14\\u0E2A\\u0E48\\u0E07\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"cards-summary__address\",\n            children: formatShippingAddress(orderDetail.shipping_address) || 'ไม่ได้ระบุที่อยู่จัดส่ง'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 11\n      }, this), detailError && !isDetailLoading && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        className: \"cards-contract__alert\",\n        children: detailError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 11\n      }, this), isDetailLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cards-contract__loading\",\n        children: [/*#__PURE__*/_jsxDEV(Spinner, {\n          animation: \"border\",\n          role: \"status\",\n          size: \"sm\",\n          className: \"me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E15\\u0E32\\u0E23\\u0E32\\u0E07\\u0E1C\\u0E48\\u0E2D\\u0E19\\u0E0A\\u0E33\\u0E23\\u0E30...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: orderDetail !== null && orderDetail !== void 0 && (_orderDetail$installm = orderDetail.installments) !== null && _orderDetail$installm !== void 0 && _orderDetail$installm.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cards-contract__table-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cards-contract__summary\",\n            children: [/*#__PURE__*/_jsxDEV(Badge, {\n              bg: \"light\",\n              text: \"dark\",\n              children: [\"\\u0E40\\u0E2B\\u0E25\\u0E37\\u0E2D\\u0E2D\\u0E35\\u0E01 \", orderDetail.installments.filter(item => item.payment_status !== 'paid').length, \" \\u0E07\\u0E27\\u0E14\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 19\n            }, this), ((_ORDER_STATUS_MAP$ord, _ORDER_STATUS_MAP$ord2) => {\n              const summaryStatus = orderDetail.order_status;\n              const summaryClasses = ['cards-status-badge'];\n              if (summaryStatus === 'cancelled' || summaryStatus === 'cancelled_by_customer') {\n                summaryClasses.push('cards-status-badge--cancelled');\n              }\n              if (summaryStatus === 'pending') {\n                summaryClasses.push('cards-status-badge--pending');\n              }\n              if (summaryStatus === 'awaiting_payment') {\n                summaryClasses.push('cards-status-badge--awaiting');\n              }\n              return /*#__PURE__*/_jsxDEV(Badge, {\n                bg: ((_ORDER_STATUS_MAP$ord = ORDER_STATUS_MAP[orderDetail.order_status]) === null || _ORDER_STATUS_MAP$ord === void 0 ? void 0 : _ORDER_STATUS_MAP$ord.variant) || 'secondary',\n                className: summaryClasses.join(' '),\n                children: ((_ORDER_STATUS_MAP$ord2 = ORDER_STATUS_MAP[orderDetail.order_status]) === null || _ORDER_STATUS_MAP$ord2 === void 0 ? void 0 : _ORDER_STATUS_MAP$ord2.label) || orderDetail.order_status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 23\n              }, this);\n            })()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Table, {\n            responsive: true,\n            hover: true,\n            className: \"cards-contract__table\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u0E07\\u0E27\\u0E14\\u0E17\\u0E35\\u0E48\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 355,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u0E22\\u0E2D\\u0E14\\u0E0A\\u0E33\\u0E23\\u0E30\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\\u0E0A\\u0E33\\u0E23\\u0E30\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 357,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E0A\\u0E33\\u0E23\\u0E30\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 358,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: orderDetail.installments.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.installment_number\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: formatCurrency(item.installment_amount)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: formatDate(item.payment_due_date)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: formatDate(item.payment_date)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 368,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(Badge, {\n                    bg: item.payment_status === 'paid' ? 'success' : 'secondary',\n                    children: item.payment_status === 'paid' ? 'ชำระแล้ว' : 'รอชำระ'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 370,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 369,\n                  columnNumber: 25\n                }, this)]\n              }, item.installment_id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 15\n        }, this) : null\n      }, void 0, false)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 200,\n    columnNumber: 5\n  }, this);\n}\n_s(Cards, \"6x7/lVwrpbJXfpl9CMebbeFbEdE=\");\n_c = Cards;\nvar _c;\n$RefreshReg$(_c, \"Cards\");","map":{"version":3,"names":["React","useEffect","useState","Container","Badge","Table","Form","Alert","Spinner","Image","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","ORDER_STATUS_MAP","pending","label","variant","awaiting_payment","approved","waiting_for_delivery","completed","cancelled","cancelled_by_customer","formatCurrency","value","parseFloat","toLocaleString","formatDate","date","Date","Number","isNaN","getTime","toLocaleDateString","formatShippingAddress","trimmed","trim","startsWith","JSON","parse","error","console","warn","recipientName","recipientSurname","filter","Boolean","join","lines","push","phone","address","calculateInstallmentAmounts","totalAmount","periods","total","numPeriods","isFinite","averagePerMonth","regularAmount","Math","ceil","amounts","i","regularTotal","lastAmount","isInstallmentOrder","order","installment_periods","monthlyPayment","monthly_payment","method","payment_method","String","toLowerCase","includes","Cards","_s","_orderDetail$installm","orders","setOrders","selectedOrderId","setSelectedOrderId","orderDetail","setOrderDetail","isOrdersLoading","setIsOrdersLoading","isDetailLoading","setIsDetailLoading","ordersError","setOrdersError","detailError","setDetailError","fetchOrders","response","get","rawData","Array","isArray","data","filtered","order_status","length","order_id","_error$response","_error$response$data","fetchOrderDetail","_error$response2","_error$response2$data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","Select","onChange","event","target","disabled","map","_order$items","primaryItem","items","product_name","_selectedOrder$items","selectedOrder","find","statusKey","statusConfig","isCancelled","isPending","isAwaitingPayment","badgeClasses","src","product_image","alt","rounded","order_date","total_amount","bg","shipping_address","animation","role","size","installments","text","item","payment_status","_ORDER_STATUS_MAP$ord","_ORDER_STATUS_MAP$ord2","summaryStatus","summaryClasses","responsive","hover","installment_number","installment_amount","payment_due_date","payment_date","installment_id","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/sangsawang_furniture_project-master/client/src/pages/Cards.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Badge from 'react-bootstrap/Badge';\nimport Table from 'react-bootstrap/Table';\nimport Form from 'react-bootstrap/Form';\nimport Alert from 'react-bootstrap/Alert';\nimport Spinner from 'react-bootstrap/Spinner';\nimport Image from 'react-bootstrap/Image';\nimport axios from 'axios';\nimport './Cards.css';\n\nconst ORDER_STATUS_MAP = {\n  pending: { label: 'รออนุมัติ', variant: 'warning' },\n  awaiting_payment: { label: 'รอชำระเงิน', variant: 'info' },\n  approved: { label: 'อนุมัติแล้ว', variant: 'success' },\n  waiting_for_delivery: { label: 'รอจัดส่ง', variant: 'primary' },\n  completed: { label: 'ส่งมอบสำเร็จ', variant: 'success' },\n  cancelled: { label: 'ยกเลิกโดยผู้ดูแล', variant: 'danger' },\n  cancelled_by_customer: { label: 'ยกเลิก', variant: 'danger' }\n};\n\nconst formatCurrency = (value) => {\n  if (value == null) return '-';\n  return `฿${parseFloat(value).toLocaleString('th-TH')}`;\n};\n\nconst formatDate = (value) => {\n  if (!value) return '-';\n  const date = new Date(value);\n  if (Number.isNaN(date.getTime())) return '-';\n  return date.toLocaleDateString('th-TH');\n};\n\nconst formatShippingAddress = (value) => {\n  if (!value) {\n    return '';\n  }\n\n  if (typeof value === 'string') {\n    const trimmed = value.trim();\n    if (!trimmed) {\n      return '';\n    }\n    if (trimmed.startsWith('{')) {\n      try {\n        return formatShippingAddress(JSON.parse(trimmed));\n      } catch (error) {\n        console.warn('Failed to parse shipping address JSON:', trimmed, error);\n        return trimmed;\n      }\n    }\n    return trimmed;\n  }\n\n  if (typeof value === 'object') {\n    const recipientName = [value.recipientName, value.recipientSurname]\n      .filter(Boolean)\n      .join(' ')\n      .trim();\n    const lines = [];\n    if (recipientName) {\n      lines.push(recipientName);\n    }\n    if (value.phone) {\n      lines.push(`โทร: ${value.phone}`);\n    }\n    if (value.address) {\n      lines.push(value.address);\n    }\n    return lines.join('\\n');\n  }\n\n  return '';\n};\n\n/**\n * คำนวณจำนวนเงินผ่อนชำระแต่ละงวดให้ถูกต้องตามหลักบัญชี\n */\nconst calculateInstallmentAmounts = (totalAmount, periods) => {\n  const total = Number(totalAmount);\n  const numPeriods = Number(periods);\n  \n  if (!Number.isFinite(total) || total <= 0 || !Number.isFinite(numPeriods) || numPeriods <= 0) {\n    return [];\n  }\n  \n  if (numPeriods === 1) {\n    return [total];\n  }\n  \n  const averagePerMonth = total / numPeriods;\n  const regularAmount = Math.ceil(averagePerMonth / 10) * 10;\n  \n  const amounts = [];\n  for (let i = 1; i < numPeriods; i++) {\n    amounts.push(regularAmount);\n  }\n  \n  const regularTotal = regularAmount * (numPeriods - 1);\n  const lastAmount = total - regularTotal;\n  amounts.push(lastAmount);\n  \n  return amounts;\n};\n\nconst isInstallmentOrder = (order) => {\n  if (!order) return false;\n  const periods = Number(order.installment_periods) || 0;\n  const monthlyPayment = Number(order.monthly_payment) || 0;\n  const method = order.payment_method ? String(order.payment_method).toLowerCase() : '';\n\n  if (method.includes('installment')) {\n    return true;\n  }\n\n  if (method.includes('cash')) {\n    return false;\n  }\n\n  if (periods > 1) {\n    return true;\n  }\n\n  return periods >= 1 && monthlyPayment > 0;\n};\n\nexport default function Cards() {\n  const [orders, setOrders] = useState([]);\n  const [selectedOrderId, setSelectedOrderId] = useState(null);\n  const [orderDetail, setOrderDetail] = useState(null);\n  const [isOrdersLoading, setIsOrdersLoading] = useState(true);\n  const [isDetailLoading, setIsDetailLoading] = useState(false);\n  const [ordersError, setOrdersError] = useState('');\n  const [detailError, setDetailError] = useState('');\n\n  useEffect(() => {\n    const fetchOrders = async () => {\n      setIsOrdersLoading(true);\n      setOrdersError('');\n      try {\n        const response = await axios.get('/api/customer/orders');\n        const rawData = Array.isArray(response.data) ? response.data : [];\n        const filtered = rawData.filter(\n          (order) =>\n            order.order_status !== 'cancelled_by_customer' &&\n            order.order_status !== 'cancelled' &&\n            isInstallmentOrder(order)\n        );\n\n        if (filtered.length === 0) {\n          setOrders([]);\n          setSelectedOrderId(null);\n          setOrdersError(\n            rawData.length > 0\n              ? 'ยังไม่มีคำสั่งซื้อที่อยู่ในแผนผ่อนชำระ (รายการที่ยกเลิกจะไม่แสดงในหน้านี้)'\n              : 'ยังไม่มีคำสั่งซื้อ'\n          );\n          return;\n        }\n\n        setOrders(filtered);\n        setOrdersError('');\n        setSelectedOrderId(filtered[0].order_id);\n      } catch (error) {\n        console.error('Error fetching customer orders:', error);\n        setOrdersError(error.response?.data?.error || 'ไม่สามารถโหลดข้อมูลคำสั่งซื้อได้');\n      } finally {\n        setIsOrdersLoading(false);\n      }\n    };\n\n    fetchOrders();\n  }, []);\n\n  useEffect(() => {\n    if (!selectedOrderId) {\n      setOrderDetail(null);\n      return;\n    }\n\n    const fetchOrderDetail = async () => {\n      setIsDetailLoading(true);\n      setDetailError('');\n      try {\n        const response = await axios.get(`/api/orders/${selectedOrderId}`);\n        setOrderDetail(response.data);\n      } catch (error) {\n        console.error('Error fetching order detail:', error);\n        setDetailError(error.response?.data?.error || 'ไม่สามารถโหลดรายละเอียดคำสั่งซื้อได้');\n        setOrderDetail(null);\n      } finally {\n        setIsDetailLoading(false);\n      }\n    };\n\n    fetchOrderDetail();\n  }, [selectedOrderId]);\n\n  return (\n    <div className=\"cards-page\">\n      <Container>\n        <header className=\"cards-contract__header-only\">\n          <div>\n            <span className=\"cards-contract__eyebrow\">แผนการผ่อนชำระ</span>\n            <h1>สถานะการผ่อนชำระ</h1>\n            <p className=\"text-muted\">\n              เลือกคำสั่งซื้อเพื่อดูรายละเอียดการผ่อนชำระแต่ละงวดได้ที่นี่\n            </p>\n          </div>\n          <div className=\"cards-contract__selector-shell\">\n            <Form.Select\n              value={selectedOrderId ?? ''}\n              onChange={(event) => setSelectedOrderId(event.target.value || null)}\n              disabled={isOrdersLoading || orders.length === 0}\n              className=\"cards-contract__selector\"\n            >\n              {orders.length === 0 && <option value=\"\">ยังไม่มีคำสั่งซื้อ</option>}\n              {orders.map((order) => {\n                const primaryItem = order.items?.[0];\n                return (\n                  <option key={order.order_id} value={order.order_id}>\n                    #{order.order_id} • {primaryItem?.product_name || 'ไม่ระบุสินค้า'}\n                  </option>\n                );\n              })}\n            </Form.Select>\n            <div className=\"cards-contract__selector-display\">\n              {isOrdersLoading ? (\n                <span>กำลังโหลด...</span>\n              ) : selectedOrderId ? (\n                (() => {\n                  const selectedOrder = orders.find((order) => order.order_id === Number(selectedOrderId));\n                  const primaryItem = selectedOrder?.items?.[0];\n                  const statusKey = orderDetail?.order_status;\n                  const statusConfig = ORDER_STATUS_MAP[statusKey] || {\n                    label: statusKey || '-',\n                    variant: 'secondary'\n                  };\n                  const isCancelled =\n                    statusKey === 'cancelled' || statusKey === 'cancelled_by_customer';\n                  const isPending = statusKey === 'pending';\n                  const isAwaitingPayment = statusKey === 'awaiting_payment';\n                  const badgeClasses = [\n                    'cards-status-badge',\n                    isCancelled ? 'cards-status-badge--cancelled' : '',\n                    isPending ? 'cards-status-badge--pending' : '',\n                    isAwaitingPayment ? 'cards-status-badge--awaiting' : ''\n                  ]\n                    .filter(Boolean)\n                    .join(' ');\n                  return (\n                    <>\n                      <div className=\"selector-product\">\n                        <Image\n                          src={primaryItem?.product_image || 'https://via.placeholder.com/80'}\n                          alt={primaryItem?.product_name || 'สินค้า'}\n                          rounded\n                        />\n                        <div>\n                          <strong>{primaryItem?.product_name || `คำสั่งซื้อ #${selectedOrder?.order_id || '-'}`}</strong>\n                          <span>\n                            {formatDate(selectedOrder?.order_date)} • {formatCurrency(selectedOrder?.total_amount)}\n                          </span>\n                        </div>\n                      </div>\n                      <Badge\n                        bg={statusConfig.variant}\n                        className={badgeClasses}\n                      >\n                        {statusConfig.label}\n                      </Badge>\n                    </>\n                  );\n                })()\n              ) : (\n                <span>เลือกคำสั่งซื้อ</span>\n              )}\n            </div>\n          </div>\n        </header>\n\n        {ordersError && (\n          <Alert variant=\"danger\" className=\"cards-contract__alert\">\n            {ordersError}\n          </Alert>\n        )}\n\n        {orderDetail && (\n          <div className=\"cards-summary\">\n            <div className=\"cards-summary__item\">\n              <span className=\"label\">ยอดรวมสัญญา</span>\n              <strong>{formatCurrency(orderDetail.total_amount)}</strong>\n            </div>\n            <div className=\"cards-summary__item\">\n              <span className=\"label\">จำนวนงวดทั้งหมด</span>\n              <strong>{orderDetail.installment_periods || '-'}</strong>\n            </div>\n            <div className=\"cards-summary__item\">\n              <span className=\"label\">งวดยอดปัจจุบัน</span>\n              <strong>{formatCurrency(orderDetail.monthly_payment)}</strong>\n            </div>\n            <div className=\"cards-summary__item\">\n              <span className=\"label\">ที่อยู่จัดส่ง</span>\n              <p className=\"cards-summary__address\">\n                {formatShippingAddress(orderDetail.shipping_address) || 'ไม่ได้ระบุที่อยู่จัดส่ง'}\n              </p>\n            </div>\n          </div>\n        )}\n\n        {detailError && !isDetailLoading && (\n          <Alert variant=\"danger\" className=\"cards-contract__alert\">\n            {detailError}\n          </Alert>\n        )}\n\n        {isDetailLoading ? (\n          <div className=\"cards-contract__loading\">\n            <Spinner animation=\"border\" role=\"status\" size=\"sm\" className=\"me-2\" />\n            <span>กำลังโหลดตารางผ่อนชำระ...</span>\n          </div>\n        ) : (\n          <>\n            {orderDetail?.installments?.length ? (\n              <div className=\"cards-contract__table-wrapper\">\n                <div className=\"cards-contract__summary\">\n                  <Badge bg=\"light\" text=\"dark\">\n                    เหลืออีก {orderDetail.installments.filter((item) => item.payment_status !== 'paid').length} งวด\n                  </Badge>\n                  {(() => {\n                    const summaryStatus = orderDetail.order_status;\n                    const summaryClasses = ['cards-status-badge'];\n                    if (summaryStatus === 'cancelled' || summaryStatus === 'cancelled_by_customer') {\n                      summaryClasses.push('cards-status-badge--cancelled');\n                    }\n                    if (summaryStatus === 'pending') {\n                      summaryClasses.push('cards-status-badge--pending');\n                    }\n                    if (summaryStatus === 'awaiting_payment') {\n                      summaryClasses.push('cards-status-badge--awaiting');\n                    }\n                    return (\n                      <Badge\n                        bg={ORDER_STATUS_MAP[orderDetail.order_status]?.variant || 'secondary'}\n                        className={summaryClasses.join(' ')}\n                      >\n                        {ORDER_STATUS_MAP[orderDetail.order_status]?.label || orderDetail.order_status}\n                      </Badge>\n                    );\n                  })()}\n                </div>\n                <Table responsive hover className=\"cards-contract__table\">\n                  <thead>\n                    <tr>\n                      <th>งวดที่</th>\n                      <th>ยอดชำระ</th>\n                      <th>กำหนดชำระ</th>\n                      <th>วันที่ชำระ</th>\n                      <th>สถานะ</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {orderDetail.installments.map((item) => (\n                      <tr key={item.installment_id}>\n                        <td>{item.installment_number}</td>\n                        <td>{formatCurrency(item.installment_amount)}</td>\n                        <td>{formatDate(item.payment_due_date)}</td>\n                        <td>{formatDate(item.payment_date)}</td>\n                        <td>\n                          <Badge bg={item.payment_status === 'paid' ? 'success' : 'secondary'}>\n                            {item.payment_status === 'paid' ? 'ชำระแล้ว' : 'รอชำระ'}\n                          </Badge>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </Table>\n              </div>\n            ) : null}\n          </>\n        )}\n      </Container>\n    </div>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}