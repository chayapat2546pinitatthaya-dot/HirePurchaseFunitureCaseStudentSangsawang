{"ast":null,"code":"var _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\Website_Sangswang\\\\client\\\\src\\\\pages\\\\admin\\\\AdminProducts.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Card from 'react-bootstrap/Card';\nimport Table from 'react-bootstrap/Table';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport Alert from 'react-bootstrap/Alert';\nimport axios from 'axios';\nimport AdminHeader from '../../components/AdminHeader';\nimport NotificationBell from '../../components/NotificationBell';\nimport './AdminProducts.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst formatPrice = value => {\n  if (value == null || value === '') {\n    return '-';\n  }\n  const numericValue = Number(value);\n  if (Number.isNaN(numericValue)) {\n    return '-';\n  }\n  return `฿${numericValue.toLocaleString('th-TH', {\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0\n  })}`;\n};\nconst parseNumeric = value => {\n  if (value == null || value === '') {\n    return null;\n  }\n  const numeric = Number(value);\n  return Number.isNaN(numeric) ? null : numeric;\n};\nconst hasPromotionPrices = (product = {}) => {\n  const cash = parseNumeric(product.price_cash);\n  const cashPromo = parseNumeric(product.price_cash_promo);\n  if (cashPromo != null && (cash == null || cashPromo < cash)) {\n    return true;\n  }\n  const installment = parseNumeric(product.price_installment);\n  const installmentPromo = parseNumeric(product.price_installment_promo);\n  if (installmentPromo != null && (installment == null || installmentPromo < installment)) {\n    return true;\n  }\n  return false;\n};\nconst DISPLAY_CATEGORY_OPTIONS = ['เตียงนอน', 'โซฟา', 'ชั้นวางทีวี', 'โต๊ะเครื่องแป้ง', 'ตู้เสื้อผ้า', 'ฟูกนอน/ที่นอน', 'ตู้โชว์', 'หิ้งพระ', 'ตู้กับข้าว', 'ตู้เสื้อผ้า + โต๊ะเครื่องแป้ง (เซ็ต)'];\nconst PROMOTION_FILTER_OPTIONS = [{\n  label: 'ทั้งหมด',\n  value: 'all'\n}, {\n  label: 'มีโปรฯ',\n  value: 'promo'\n}, {\n  label: 'ไม่มีโปรฯ',\n  value: 'regular'\n}];\nconst MAX_PRODUCT_IMAGES = 4;\nconst normalizeImageArray = value => {\n  const source = Array.isArray(value) ? value : value ? [value] : [];\n  const cleaned = source.map(item => item == null ? '' : String(item).trim()).filter(Boolean);\n  const padded = cleaned.slice(0, MAX_PRODUCT_IMAGES);\n  while (padded.length < MAX_PRODUCT_IMAGES) {\n    padded.push('');\n  }\n  return padded;\n};\nconst compactImages = (images = []) => images.map(item => item == null ? '' : String(item).trim()).filter(Boolean).slice(0, MAX_PRODUCT_IMAGES);\nconst INSTALLMENT_MIN_PERIODS = 2;\nconst INSTALLMENT_MAX_PERIODS = 12;\nconst DEFAULT_INSTALLMENT_PERIODS = 12;\nconst getInstallmentRateByMonths = (months = DEFAULT_INSTALLMENT_PERIODS) => {\n  const normalized = Number(months);\n  if (!Number.isFinite(normalized) || normalized < INSTALLMENT_MIN_PERIODS) {\n    return 0;\n  }\n  // 2 เดือน: 10%, 3-12 เดือน: เพิ่มขึ้นเรื่อยๆ จนถึง 12 เดือนที่ 20%\n  if (normalized === INSTALLMENT_MIN_PERIODS) {\n    return 0.1; // 2 เดือน = 10%\n  }\n  if (normalized >= INSTALLMENT_MAX_PERIODS) {\n    return 0.2; // 12 เดือน = 20%\n  }\n  // 3-11 เดือน: คำนวณแบบ linear จาก 10% ถึง 20%\n  // rate = 0.1 + (months - 2) * (0.2 - 0.1) / (12 - 2)\n  return 0.1 + (normalized - INSTALLMENT_MIN_PERIODS) * (0.2 - 0.1) / (INSTALLMENT_MAX_PERIODS - INSTALLMENT_MIN_PERIODS);\n};\nconst calculateInstallmentPrice = (basePrice, months = DEFAULT_INSTALLMENT_PERIODS) => {\n  const price = Number(basePrice);\n  if (!Number.isFinite(price) || price <= 0) {\n    return null;\n  }\n  const rate = getInstallmentRateByMonths(months);\n  return Math.round(price * (1 + rate));\n};\nconst DEFAULT_INSTALLMENT_RATE_PERCENT = Math.round(getInstallmentRateByMonths(DEFAULT_INSTALLMENT_PERIODS) * 100);\nconst resolveImagePreview = value => {\n  if (!value) {\n    return null;\n  }\n  const trimmed = String(value).trim();\n  if (!trimmed) {\n    return null;\n  }\n  // ถ้าเป็น data URI, blob URI, หรือ full URL ให้ใช้ตามนั้น\n  if (trimmed.startsWith('data:') || trimmed.startsWith('blob:') || trimmed.startsWith('http://') || trimmed.startsWith('https://')) {\n    return trimmed;\n  }\n\n  // ดึงรูปภาพจากโฟลเดอร์ images โดยตรงผ่าน static file serving (ไม่ผ่าน API)\n  // ใช้ relative path เพื่อให้ React proxy ทำงาน\n  // สำหรับ path ที่มีอักขระภาษาไทย ต้อง encode แต่ละส่วนของ path\n\n  // ถ้า path เริ่มต้นด้วย / แล้ว ให้ encode แต่ละส่วนของ path\n  if (trimmed.startsWith('/')) {\n    try {\n      // แยก path เป็นส่วนๆ และ encode แต่ละส่วน (ยกเว้น / หน้า)\n      const parts = trimmed.split('/').filter(p => p);\n      const encodedParts = parts.map(part => {\n        // Encode แต่ละส่วนของ path เพื่อให้ browser ส่งไปยัง server ถูกต้อง\n        try {\n          return encodeURIComponent(part);\n        } catch (e) {\n          return part;\n        }\n      });\n      return '/' + encodedParts.join('/');\n    } catch (e) {\n      return trimmed;\n    }\n  }\n\n  // ถ้าเป็น path ปกติ ให้แปลงเป็น absolute path\n  if (trimmed.includes('/') || trimmed.includes('\\\\')) {\n    // แปลง backslash เป็น forward slash\n    const normalized = trimmed.replace(/\\\\/g, '/');\n    // ถ้าไม่มี / หน้า ให้เพิ่ม\n    const pathToEncode = normalized.startsWith('/') ? normalized : `/${normalized}`;\n    try {\n      const parts = pathToEncode.split('/').filter(p => p);\n      const encodedParts = parts.map(part => {\n        try {\n          return encodeURIComponent(part);\n        } catch (e) {\n          return part;\n        }\n      });\n      return '/' + encodedParts.join('/');\n    } catch (e) {\n      return pathToEncode;\n    }\n  }\n\n  // ถ้าเป็นแค่ชื่อไฟล์ ให้ encode และใส่ใน /images/\n  try {\n    return `/images/${encodeURIComponent(trimmed)}`;\n  } catch (e) {\n    return `/images/${trimmed}`;\n  }\n};\nexport default function AdminProducts({\n  admin,\n  logout,\n  isSidebarCollapsed,\n  toggleSidebar,\n  adminNotifications,\n  markAdminOrdersSeen,\n  markAdminCustomersSeen,\n  markAdminPaymentsSeen\n}) {\n  _s();\n  var _formData$images, _formData$images2;\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [products, setProducts] = useState([]);\n  const [categoryMap, setCategoryMap] = useState(new Map());\n  const [activeCategory, setActiveCategory] = useState('all');\n  const [promotionFilter, setPromotionFilter] = useState('all');\n  const [productSearch, setProductSearch] = useState('');\n  const [editingProduct, setEditingProduct] = useState(null);\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    priceCash: '',\n    priceCashPromo: '',\n    highlights: '',\n    displayCategory: DISPLAY_CATEGORY_OPTIONS[0] || '',\n    images: Array(MAX_PRODUCT_IMAGES).fill('')\n  });\n  const [imageFile, setImageFile] = useState(null);\n  const [imagePreview, setImagePreview] = useState(null);\n  const [message, setMessage] = useState({\n    show: false,\n    text: '',\n    variant: ''\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [sortBy, setSortBy] = useState('newest');\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [selectedProducts, setSelectedProducts] = useState(new Set());\n  const [previousProductsCount, setPreviousProductsCount] = useState(0);\n  const [alerts, setAlerts] = useState([]);\n  const playNotificationSound = () => {\n    try {\n      // สร้างเสียงเตือนแบบ beep\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      const oscillator = audioContext.createOscillator();\n      const gainNode = audioContext.createGain();\n      oscillator.connect(gainNode);\n      gainNode.connect(audioContext.destination);\n      oscillator.frequency.value = 800; // ความถี่เสียง\n      oscillator.type = 'sine';\n      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\n      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);\n      oscillator.start(audioContext.currentTime);\n      oscillator.stop(audioContext.currentTime + 0.3);\n    } catch (error) {\n      console.log('ไม่สามารถเล่นเสียงเตือนได้:', error);\n    }\n  };\n  const autoInstallmentPrice = useMemo(() => calculateInstallmentPrice(formData.priceCash), [formData.priceCash]);\n  const autoInstallmentPromoPrice = useMemo(() => calculateInstallmentPrice(formData.priceCashPromo), [formData.priceCashPromo]);\n  const getCategoryLabel = product => {\n    if (!product) {\n      return '-';\n    }\n    if (Array.isArray(product.tags) && product.tags.length > 0) {\n      const categoryTag = product.tags.map(tag => tag == null ? '' : String(tag).trim()).find(tag => DISPLAY_CATEGORY_OPTIONS.includes(tag));\n      if (categoryTag) {\n        return categoryTag;\n      }\n    }\n    if (product.category_name && String(product.category_name).trim()) {\n      const label = String(product.category_name).trim();\n      if (DISPLAY_CATEGORY_OPTIONS.includes(label)) {\n        return label;\n      }\n    }\n    if (product.category_id != null) {\n      const categoryIdString = String(product.category_id);\n      for (const [label, id] of categoryMap.entries()) {\n        if (String(id) === categoryIdString) {\n          return label;\n        }\n      }\n    }\n    return '-';\n  };\n  useEffect(() => {\n    fetchProducts();\n    fetchCategories();\n  }, []);\n\n  // ไม่แสดง popup alerts แล้ว ใช้ notification bell แทน\n\n  useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    const action = params.get('action');\n    if (action === 'add') {\n      handleAdd();\n      params.delete('action');\n      const nextSearch = params.toString();\n      navigate({\n        pathname: location.pathname,\n        search: nextSearch ? `?${nextSearch}` : ''\n      }, {\n        replace: true\n      });\n    }\n  }, [location.pathname, location.search, navigate]);\n  const fetchCategories = async () => {\n    try {\n      const response = await axios.get('/api/categories');\n      const data = Array.isArray(response.data) ? response.data : [];\n      const map = new Map(data.map(item => [(item.category_name || '').trim(), item.category_id]));\n      setCategoryMap(map);\n    } catch (error) {\n      console.error('Error fetching categories:', error);\n      setCategoryMap(new Map());\n    }\n  };\n  const fetchProducts = async () => {\n    try {\n      const response = await axios.get('/api/products');\n      const newProducts = response.data || [];\n\n      // ตรวจสอบว่ามีสินค้าใหม่หรือไม่\n      if (previousProductsCount > 0 && !isLoading && newProducts.length > previousProductsCount) {\n        const newCount = newProducts.length - previousProductsCount;\n        setAlerts(prev => [...prev, {\n          id: Date.now(),\n          type: 'info',\n          message: `มีสินค้าใหม่ ${newCount} รายการ`,\n          timestamp: new Date()\n        }]);\n      }\n      const normalized = newProducts.map(item => {\n        const images = Array.isArray(item.product_images) ? item.product_images.map(img => img == null ? '' : String(img).trim()).filter(Boolean) : item.product_image ? [String(item.product_image).trim()] : [];\n        const heroImage = images[0] || (item.product_image ? String(item.product_image).trim() : '');\n        return {\n          ...item,\n          category_id: item.category_id != null ? String(item.category_id) : '',\n          category_name: (item.category_name || '').trim(),\n          tags: Array.isArray(item.tags) ? item.tags.map(tag => tag == null ? '' : String(tag).trim()).filter(Boolean) : [],\n          product_image: heroImage,\n          product_images: images,\n          highlights: Array.isArray(item.highlights) ? item.highlights : []\n        };\n      });\n\n      // ตรวจสอบว่ามีสินค้าใหม่หรือไม่\n      if (previousProductsCount > 0 && !isLoading && normalized.length > previousProductsCount) {\n        const newCount = normalized.length - previousProductsCount;\n        playNotificationSound();\n        setAlerts(prev => [...prev, {\n          id: Date.now(),\n          type: 'info',\n          message: `มีสินค้าใหม่ ${newCount} รายการ`,\n          timestamp: new Date()\n        }]);\n      }\n      setProducts(normalized);\n      setPreviousProductsCount(normalized.length);\n      // setActiveCategory((prev) => { // This line is removed as per the edit hint\n      //   if (prev === 'all') {\n      //     return prev;\n      //   }\n      //   const hasCategory = normalized.some((item) => {\n      //     const categoryId = item.category_id != null ? String(item.category_id) : '';\n      //     return categoryId === prev;\n      //   });\n      //   return hasCategory ? prev : 'all';\n      // });\n    } catch (error) {\n      console.error('Error fetching products:', error);\n    }\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleImageChange = e => {\n    const file = e.target.files[0];\n    if (file) {\n      console.log('File selected:', file.name, file.type, file.size);\n      setImageFile(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        var _reader$result;\n        console.log('FileReader loaded, result length:', (_reader$result = reader.result) === null || _reader$result === void 0 ? void 0 : _reader$result.length);\n        setImagePreview(reader.result);\n      };\n      reader.onerror = error => {\n        console.error('FileReader error:', error);\n        setImagePreview(null);\n      };\n      reader.readAsDataURL(file);\n      // อัปเดต formData.images[0] เป็นชื่อไฟล์ (แต่ preview จะใช้ data URL จาก FileReader)\n      setFormData(prev => {\n        const nextImages = [...prev.images];\n        nextImages[0] = file.name;\n        return {\n          ...prev,\n          images: nextImages\n        };\n      });\n    } else {\n      console.log('No file selected');\n      setImageFile(null);\n      setImagePreview(null);\n    }\n  };\n  const handleImageFieldChange = (index, value) => {\n    setFormData(prev => {\n      const nextImages = [...prev.images];\n      nextImages[index] = value;\n      return {\n        ...prev,\n        images: nextImages\n      };\n    });\n    if (index === 0 && !imageFile) {\n      setImagePreview(resolveImagePreview(value));\n    } else if (index === 0 && imageFile) {\n      setImageFile(null);\n      setImagePreview(resolveImagePreview(value));\n    }\n  };\n  const handleEdit = product => {\n    var _product$price_cash, _product$price_cash_p;\n    setEditingProduct(product);\n    const imagesForState = normalizeImageArray(Array.isArray(product.product_images) && product.product_images.length > 0 ? product.product_images : product.product_image ? [product.product_image] : []);\n    const existingDisplayCategory = Array.isArray(product.tags) ? product.tags.map(tag => tag == null ? '' : String(tag).trim()).find(tag => DISPLAY_CATEGORY_OPTIONS.includes(tag)) : '';\n    const fallbackCategory = getCategoryLabel(product);\n    const resolvedDisplayCategory = DISPLAY_CATEGORY_OPTIONS.includes(existingDisplayCategory) ? existingDisplayCategory : DISPLAY_CATEGORY_OPTIONS.includes(fallbackCategory) ? fallbackCategory : DISPLAY_CATEGORY_OPTIONS[0] || '';\n    setFormData({\n      name: product.product_name,\n      description: product.product_description || '',\n      priceCash: (_product$price_cash = product.price_cash) !== null && _product$price_cash !== void 0 ? _product$price_cash : '',\n      priceCashPromo: (_product$price_cash_p = product.price_cash_promo) !== null && _product$price_cash_p !== void 0 ? _product$price_cash_p : '',\n      highlights: (product.highlights || []).join('\\n'),\n      displayCategory: resolvedDisplayCategory,\n      images: imagesForState\n    });\n    setImageFile(null);\n    setImagePreview(resolveImagePreview(imagesForState[0]));\n    setIsDrawerOpen(true);\n  };\n  const handleAdd = () => {\n    setEditingProduct(null);\n    setFormData({\n      name: '',\n      description: '',\n      priceCash: '',\n      priceCashPromo: '',\n      highlights: '',\n      displayCategory: DISPLAY_CATEGORY_OPTIONS[0] || '',\n      images: Array(MAX_PRODUCT_IMAGES).fill('')\n    });\n    setImageFile(null);\n    setImagePreview(null);\n    setIsDrawerOpen(true);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setIsLoading(true);\n    try {\n      var _categoryMap$get;\n      let imageList = compactImages(formData.images);\n      const displayCategoryTag = formData.displayCategory ? String(formData.displayCategory).trim() : '';\n      const tagsToSend = displayCategoryTag ? [displayCategoryTag] : [];\n      const categoryIdFromLabel = displayCategoryTag ? (_categoryMap$get = categoryMap.get(displayCategoryTag)) !== null && _categoryMap$get !== void 0 ? _categoryMap$get : null : null;\n\n      // ถ้ามีไฟล์ที่เลือก ให้อัปโหลดไฟล์ก่อน\n      if (imageFile) {\n        try {\n          const formDataUpload = new FormData();\n          formDataUpload.append('image', imageFile);\n          if (displayCategoryTag) {\n            formDataUpload.append('category', displayCategoryTag);\n          }\n          const uploadResponse = await axios.post('/api/upload', formDataUpload, {\n            headers: {\n              'Content-Type': 'multipart/form-data'\n            }\n          });\n\n          // ใช้ path จาก server\n          const uploadedImagePath = uploadResponse.data.path;\n          if (uploadedImagePath) {\n            imageList[0] = uploadedImagePath;\n            // อัปเดต formData.images[0] ด้วย path ที่อัปโหลด\n            setFormData(prev => {\n              const nextImages = [...prev.images];\n              nextImages[0] = uploadedImagePath;\n              return {\n                ...prev,\n                images: nextImages\n              };\n            });\n          }\n        } catch (uploadError) {\n          var _uploadError$response, _uploadError$response2;\n          console.error('Error uploading image:', uploadError);\n          setMessage({\n            show: true,\n            text: ((_uploadError$response = uploadError.response) === null || _uploadError$response === void 0 ? void 0 : (_uploadError$response2 = _uploadError$response.data) === null || _uploadError$response2 === void 0 ? void 0 : _uploadError$response2.error) || 'อัปโหลดไฟล์ไม่สำเร็จ',\n            variant: 'danger'\n          });\n          setIsLoading(false);\n          return;\n        }\n      }\n      const parsedPriceCash = formData.priceCash !== '' ? parseFloat(formData.priceCash) : null;\n      const parsedPriceCashPromo = formData.priceCashPromo !== '' ? parseFloat(formData.priceCashPromo) : null;\n      const computedInstallment = calculateInstallmentPrice(parsedPriceCash);\n      const computedInstallmentPromo = parsedPriceCashPromo != null ? calculateInstallmentPrice(parsedPriceCashPromo) : null;\n      const dataToSend = {\n        name: formData.name,\n        description: formData.description,\n        categoryId: categoryIdFromLabel,\n        tags: tagsToSend,\n        highlights: formData.highlights.split('\\n').map(line => line.trim()).filter(Boolean),\n        priceCash: parsedPriceCash,\n        priceCashPromo: parsedPriceCashPromo,\n        priceInstallment: computedInstallment,\n        priceInstallmentPromo: computedInstallmentPromo,\n        image: imageList[0] || '',\n        images: imageList\n      };\n      if (editingProduct) {\n        await axios.put(`/api/products/${editingProduct.product_id}`, dataToSend);\n        setMessage({\n          show: true,\n          text: 'แก้ไขสินค้าสำเร็จ',\n          variant: 'success'\n        });\n      } else {\n        await axios.post('/api/products', dataToSend);\n        setMessage({\n          show: true,\n          text: 'เพิ่มสินค้าสำเร็จ',\n          variant: 'success'\n        });\n      }\n      fetchProducts();\n      setIsDrawerOpen(false);\n      setImageFile(null);\n      setImagePreview(null);\n      setMessage({\n        show: true,\n        text: editingProduct ? 'แก้ไขสินค้าสำเร็จ ✅' : 'เพิ่มสินค้าสำเร็จ ✅',\n        variant: 'success'\n      });\n      setTimeout(() => setMessage({\n        show: false\n      }), 3000);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Error saving product:', error);\n      setMessage({\n        show: true,\n        text: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'เกิดข้อผิดพลาด',\n        variant: 'danger'\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleDelete = async productId => {\n    if (!window.confirm('ยืนยันการลบสินค้านี้?')) {\n      return;\n    }\n    try {\n      await axios.delete(`/api/products/${productId}`);\n      setMessage({\n        show: true,\n        text: 'ลบสินค้าสำเร็จ ✅',\n        variant: 'success'\n      });\n      fetchProducts();\n      setTimeout(() => setMessage({\n        show: false\n      }), 3000);\n    } catch (error) {\n      console.error('Error deleting product:', error);\n      setMessage({\n        show: true,\n        text: 'เกิดข้อผิดพลาด',\n        variant: 'danger'\n      });\n    }\n  };\n  const handleViewDetails = product => {\n    if (!product || !product.product_id) {\n      return;\n    }\n    // เปิดหน้ารายละเอียดสินค้าแบบเดียวกับที่ลูกค้าเห็น ในแท็บใหม่\n    const url = `/products/${product.product_id}`;\n    window.open(url, '_blank', 'noopener,noreferrer');\n  };\n  const columns = [{\n    key: 'product_id',\n    header: 'ID',\n    className: 'text-center product-id-col',\n    render: product => product.product_id\n  }, {\n    key: 'product_image',\n    header: 'รูปภาพ',\n    className: 'product-image-col',\n    render: product => {\n      const imageUrl = resolveImagePreview(product.product_image);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-image-cell\",\n        children: [imageUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: imageUrl,\n          alt: product.product_name || 'Product',\n          className: \"product-image-thumbnail\",\n          onError: e => {\n            console.error('Image load error:', imageUrl);\n            e.target.style.display = 'none';\n            e.target.nextSibling.style.display = 'block';\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 637,\n          columnNumber: 15\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-image-placeholder\",\n          style: {\n            display: imageUrl ? 'none' : 'block'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 649,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 648,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 635,\n        columnNumber: 11\n      }, this);\n    }\n  }, {\n    key: 'product_name',\n    header: 'สินค้า',\n    className: 'product-name-col',\n    render: product => {\n      const showPromotion = hasPromotionPrices(product);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-name-cell\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-name-cell__main\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"product-name-cell__name\",\n            children: product.product_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 664,\n            columnNumber: 15\n          }, this), showPromotion && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"product-promo-badge\",\n            children: \"\\u0E21\\u0E35\\u0E42\\u0E1B\\u0E23\\u0E2F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 665,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-name-cell__meta\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"product-name-cell__category\",\n            children: getCategoryLabel(product)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 668,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 667,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 662,\n        columnNumber: 11\n      }, this);\n    }\n  }, {\n    key: 'category',\n    header: 'หมวดหมู่',\n    className: 'category-col text-muted',\n    render: product => getCategoryLabel(product)\n  }, {\n    key: 'price_summary',\n    header: 'ราคาขาย(สด/ผ่อน)',\n    className: 'price-summary-col',\n    render: product => {\n      // ราคาขายปัจจุบัน = ราคาโปรโมชัน (ถ้ามี) หรือ ราคาปกติ\n      const cashPromo = parseNumeric(product.price_cash_promo);\n      const cash = parseNumeric(product.price_cash);\n      const installmentPromo = parseNumeric(product.price_installment_promo);\n      const installment = parseNumeric(product.price_installment);\n\n      // หาราคาขายปัจจุบัน (โปรโมชันก่อน ถ้าไม่มีใช้ราคาปกติ)\n      const currentCashPrice = cashPromo || cash;\n      const currentInstallmentPrice = installmentPromo || installment;\n      const originalCashPrice = cash;\n      const originalInstallmentPrice = installment;\n      const hasCashPromo = cashPromo && cashPromo < cash;\n      const hasInstallmentPromo = installmentPromo && installmentPromo < installment;\n      if (!currentCashPrice && !currentInstallmentPrice) {\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-muted\",\n          children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E38\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 700,\n          columnNumber: 18\n        }, this);\n      }\n\n      // Format price without currency symbol for compact display\n      const formatPriceCompact = value => {\n        if (value == null || value === '') {\n          return '-';\n        }\n        const numericValue = Number(value);\n        if (Number.isNaN(numericValue)) {\n          return '-';\n        }\n        return numericValue.toLocaleString('th-TH', {\n          minimumFractionDigits: 0,\n          maximumFractionDigits: 0\n        });\n      };\n      const cashDisplay = currentCashPrice ? formatPriceCompact(currentCashPrice) : '-';\n      const installmentDisplay = currentInstallmentPrice ? formatPriceCompact(currentInstallmentPrice) : '-';\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-price-cell\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-price-cell__compact\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"product-price-cell__compact-price\",\n            children: [cashDisplay, \"/\", installmentDisplay]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 724,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 723,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 722,\n        columnNumber: 11\n      }, this);\n    }\n  }, {\n    key: 'highlights',\n    header: 'รายละเอียด',\n    className: 'highlights-col',\n    render: product => product.highlights && product.highlights.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-highlights\",\n      children: [product.highlights.slice(0, 2).map((highlight, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-highlight-item\",\n        children: highlight\n      }, idx, false, {\n        fileName: _jsxFileName,\n        lineNumber: 740,\n        columnNumber: 15\n      }, this)), product.highlights.length > 2 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-highlight-item text-muted\",\n        children: \"...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 745,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 738,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"text-muted\",\n      children: \"-\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 749,\n      columnNumber: 11\n    }, this)\n  }, {\n    key: 'actions',\n    header: 'จัดการ',\n    className: 'text-nowrap text-end actions-col',\n    render: product => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-product-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"admin-product-action-btn admin-product-action-btn--view\",\n        onClick: () => handleViewDetails(product),\n        title: \"\\u0E14\\u0E39\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-eye\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 763,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 758,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"admin-product-action-btn admin-product-action-btn--edit\",\n        onClick: () => handleEdit(product),\n        title: \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-pencil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 770,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 765,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"admin-product-action-btn admin-product-action-btn--delete\",\n        onClick: () => handleDelete(product.product_id),\n        title: \"\\u0E25\\u0E1A\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-trash\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 777,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 772,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 757,\n      columnNumber: 9\n    }, this)\n  }];\n  const categoryFilters = useMemo(() => {\n    return [{\n      label: 'ทั้งหมด',\n      value: 'all'\n    }, ...DISPLAY_CATEGORY_OPTIONS.map(label => ({\n      label,\n      value: label\n    }))];\n  }, []);\n  useEffect(() => {\n    const allowedValues = new Set(['all', ...DISPLAY_CATEGORY_OPTIONS]);\n    if (!allowedValues.has(activeCategory)) {\n      setActiveCategory('all');\n    }\n  }, [activeCategory]);\n  const categoryProducts = useMemo(() => {\n    if (activeCategory === 'all') {\n      return products;\n    }\n    return products.filter(product => getCategoryLabel(product) === activeCategory);\n  }, [products, activeCategory]);\n  const searchedProducts = useMemo(() => {\n    const trimmed = productSearch.replace(/#/g, '').trim();\n    if (!trimmed) {\n      return categoryProducts;\n    }\n    const keyword = trimmed.toLowerCase();\n    return categoryProducts.filter(product => {\n      const idMatch = String(product.product_id).toLowerCase().includes(keyword);\n      const nameMatch = (product.product_name || '').toLowerCase().includes(keyword);\n      return idMatch || nameMatch;\n    });\n  }, [categoryProducts, productSearch]);\n  const filteredProducts = useMemo(() => {\n    let result = searchedProducts;\n\n    // Apply promotion filter\n    if (promotionFilter !== 'all') {\n      const shouldHavePromo = promotionFilter === 'promo';\n      result = result.filter(product => {\n        const hasPromo = hasPromotionPrices(product);\n        return shouldHavePromo ? hasPromo : !hasPromo;\n      });\n    }\n\n    // Apply sorting\n    const sorted = [...result].sort((a, b) => {\n      switch (sortBy) {\n        case 'newest':\n          return b.product_id - a.product_id;\n        case 'oldest':\n          return a.product_id - b.product_id;\n        case 'price_asc':\n          const priceA = parseNumeric(a.price_cash) || parseNumeric(a.price_installment) || 0;\n          const priceB = parseNumeric(b.price_cash) || parseNumeric(b.price_installment) || 0;\n          return priceA - priceB;\n        case 'price_desc':\n          const priceA2 = parseNumeric(a.price_cash) || parseNumeric(a.price_installment) || 0;\n          const priceB2 = parseNumeric(b.price_cash) || parseNumeric(b.price_installment) || 0;\n          return priceB2 - priceA2;\n        case 'name_asc':\n          return (a.product_name || '').localeCompare(b.product_name || '', 'th');\n        case 'name_desc':\n          return (b.product_name || '').localeCompare(a.product_name || '', 'th');\n        default:\n          return 0;\n      }\n    });\n    return sorted;\n  }, [searchedProducts, promotionFilter, sortBy]);\n  const activeCategoryLabel = activeCategory === 'all' ? '' : activeCategory;\n  const categoryCount = categoryProducts.length;\n  const filteredCount = filteredProducts.length;\n\n  // Auto-remove alerts after 5 seconds\n  useEffect(() => {\n    if (alerts.length > 0) {\n      const timer = setTimeout(() => {\n        setAlerts(prev => prev.slice(1));\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [alerts]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-products-page\",\n    children: [/*#__PURE__*/_jsxDEV(AdminHeader, {\n      admin: admin,\n      onLogout: logout,\n      isCollapsed: isSidebarCollapsed,\n      onToggleSidebar: toggleSidebar,\n      adminNotifications: adminNotifications,\n      markAdminOrdersSeen: markAdminOrdersSeen,\n      markAdminCustomersSeen: markAdminCustomersSeen,\n      markAdminPaymentsSeen: markAdminPaymentsSeen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 876,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NotificationBell, {\n      adminNotifications: adminNotifications,\n      markAdminOrdersSeen: markAdminOrdersSeen,\n      markAdminCustomersSeen: markAdminCustomersSeen,\n      markAdminPaymentsSeen: markAdminPaymentsSeen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 886,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"py-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-products-topbar mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-products-topbar__title\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"mb-1\",\n            children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 895,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-muted small mb-0\",\n            children: \"\\u0E14\\u0E39\\u0E41\\u0E25\\u0E30\\u0E08\\u0E31\\u0E14\\u0E23\\u0E30\\u0E40\\u0E1A\\u0E35\\u0E22\\u0E1A\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E1E\\u0E23\\u0E49\\u0E2D\\u0E21\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E14\\u0E49\\u0E27\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E44\\u0E14\\u0E49\\u0E17\\u0E31\\u0E19\\u0E17\\u0E35\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 896,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 894,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/admin/dashboard\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline-secondary\",\n            className: \"admin-products-back\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-arrow-left me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 902,\n              columnNumber: 15\n            }, this), \"\\u0E22\\u0E49\\u0E2D\\u0E19\\u0E01\\u0E25\\u0E31\\u0E1A\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 901,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 900,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 893,\n        columnNumber: 9\n      }, this), message.show && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: message.variant,\n        dismissible: true,\n        onClose: () => setMessage({\n          show: false\n        }),\n        children: message.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 909,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-products-toolbar\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-products-toolbar__search\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 917,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E14\\u0E49\\u0E27\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32, \\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48 \\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\",\n            value: productSearch,\n            onChange: event => setProductSearch(event.target.value),\n            onKeyDown: e => {\n              if (e.key === '/' && e.target !== document.activeElement) {\n                e.preventDefault();\n                e.target.focus();\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 918,\n            columnNumber: 13\n          }, this), productSearch && /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"admin-products-toolbar__search-clear\",\n            onClick: () => setProductSearch(''),\n            \"aria-label\": \"\\u0E25\\u0E49\\u0E32\\u0E07\\u0E01\\u0E32\\u0E23\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-x-circle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 937,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 931,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 916,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-products-toolbar__filters\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"admin-products-toolbar__filter\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-funnel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 943,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n              value: promotionFilter,\n              onChange: event => setPromotionFilter(event.target.value),\n              children: PROMOTION_FILTER_OPTIONS.map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: option.value,\n                children: option.label\n              }, option.value, false, {\n                fileName: _jsxFileName,\n                lineNumber: 949,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 944,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 942,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"admin-products-toolbar__filter\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-sort-down\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 956,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n              value: sortBy,\n              onChange: event => setSortBy(event.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"newest\",\n                children: \"\\u0E43\\u0E2B\\u0E21\\u0E48\\u0E25\\u0E48\\u0E32\\u0E2A\\u0E38\\u0E14\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 961,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"oldest\",\n                children: \"\\u0E40\\u0E01\\u0E48\\u0E32\\u0E17\\u0E35\\u0E48\\u0E2A\\u0E38\\u0E14\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 962,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"price_asc\",\n                children: \"\\u0E23\\u0E32\\u0E04\\u0E32: \\u0E15\\u0E48\\u0E33 \\u2192 \\u0E2A\\u0E39\\u0E07\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 963,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"price_desc\",\n                children: \"\\u0E23\\u0E32\\u0E04\\u0E32: \\u0E2A\\u0E39\\u0E07 \\u2192 \\u0E15\\u0E48\\u0E33\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 964,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"name_asc\",\n                children: \"\\u0E0A\\u0E37\\u0E48\\u0E2D: \\u0E01 \\u2192 \\u0E2E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 965,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"name_desc\",\n                children: \"\\u0E0A\\u0E37\\u0E48\\u0E2D: \\u0E2E \\u2192 \\u0E01\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 966,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 957,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 955,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 941,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleAdd,\n          className: \"admin-products-toolbar__add\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-plus-lg me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 971,\n            columnNumber: 13\n          }, this), \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 970,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 915,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-products-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"admin-products-summary__label\",\n          children: \"\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 978,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n          className: \"admin-products-summary__count\",\n          children: [\"\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14 \", filteredCount, \" \\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 979,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 977,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: \"admin-products-card\",\n        children: /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"category-filter-label mb-2\",\n              children: \"\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 986,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"admin-category-filter\",\n              children: categoryFilters.map(category => /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: `category-chip ${activeCategory === category.value ? 'active' : ''}`,\n                onClick: () => setActiveCategory(category.value),\n                \"aria-label\": `กรองหมวดหมู่ ${category.label}`,\n                children: category.label\n              }, category.value, false, {\n                fileName: _jsxFileName,\n                lineNumber: 989,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 987,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 985,\n            columnNumber: 13\n          }, this), filteredProducts.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"admin-products-empty\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"admin-products-empty__icon\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-inbox\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1005,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1004,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E43\\u0E19\\u0E23\\u0E30\\u0E1A\\u0E1A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1007,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted\",\n              children: \"\\u0E40\\u0E23\\u0E34\\u0E48\\u0E21\\u0E15\\u0E49\\u0E19\\u0E14\\u0E49\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E43\\u0E2B\\u0E21\\u0E48\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1008,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: handleAdd,\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-plus-lg me-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1010,\n                columnNumber: 19\n              }, this), \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E43\\u0E2B\\u0E21\\u0E48\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1009,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1003,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(Table, {\n            responsive: true,\n            hover: true,\n            className: \"admin-products-table align-middle\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: columns.map(column => /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: column.header === 'จัดการ' ? 'text-end' : '',\n                  children: column.header\n                }, column.key, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1019,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1017,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1016,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: filteredProducts.map(product => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: columns.map(column => /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: column.className,\n                  children: column.render(product)\n                }, `${product.product_id}-${column.key}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1029,\n                  columnNumber: 25\n                }, this))\n              }, product.product_id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1027,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1025,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1015,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 983,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 982,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `admin-products-drawer ${isDrawerOpen ? 'admin-products-drawer--open' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-products-drawer__overlay\",\n          onClick: () => setIsDrawerOpen(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1043,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-products-drawer__content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"admin-products-drawer__header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: editingProduct ? 'แก้ไขสินค้า' : 'เพิ่มสินค้าใหม่'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1046,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"admin-products-drawer__close\",\n              onClick: () => setIsDrawerOpen(false),\n              \"aria-label\": \"\\u0E1B\\u0E34\\u0E14\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-x-lg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1052,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1047,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1045,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"admin-products-drawer__body\",\n            children: /*#__PURE__*/_jsxDEV(Form, {\n              onSubmit: handleSubmit,\n              children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1058,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  type: \"text\",\n                  name: \"name\",\n                  value: formData.name,\n                  onChange: handleInputChange,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1059,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1057,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: \"\\u0E04\\u0E33\\u0E2D\\u0E18\\u0E34\\u0E1A\\u0E32\\u0E22\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1069,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  as: \"textarea\",\n                  rows: 3,\n                  name: \"description\",\n                  value: formData.description,\n                  onChange: handleInputChange,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1070,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1068,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: \"\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1081,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n                  name: \"displayCategory\",\n                  value: formData.displayCategory,\n                  onChange: handleInputChange,\n                  children: DISPLAY_CATEGORY_OPTIONS.map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: option,\n                    children: option\n                  }, option, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1088,\n                    columnNumber: 23\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1082,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1080,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: \"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32 (\\u0E2B\\u0E19\\u0E36\\u0E48\\u0E07\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E15\\u0E48\\u0E2D\\u0E1A\\u0E23\\u0E23\\u0E17\\u0E31\\u0E14)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1096,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  as: \"textarea\",\n                  rows: 4,\n                  name: \"highlights\",\n                  value: formData.highlights,\n                  onChange: handleInputChange,\n                  placeholder: \"\\u0E40\\u0E0A\\u0E48\\u0E19\\n- \\u0E2B\\u0E19\\u0E31\\u0E07\\u0E41\\u0E17\\u0E49\\u0E40\\u0E01\\u0E23\\u0E14\\u0E1E\\u0E23\\u0E35\\u0E40\\u0E21\\u0E35\\u0E22\\u0E21\\n- \\u0E42\\u0E04\\u0E23\\u0E07\\u0E2A\\u0E23\\u0E49\\u0E32\\u0E07\\u0E23\\u0E31\\u0E1A\\u0E1B\\u0E23\\u0E30\\u0E01\\u0E31\\u0E19 5 \\u0E1B\\u0E35\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1097,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1095,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  md: 6,\n                  children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                      children: \"\\u0E23\\u0E32\\u0E04\\u0E32 (\\u0E0B\\u0E37\\u0E49\\u0E2D\\u0E2A\\u0E14)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1110,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                      type: \"number\",\n                      name: \"priceCash\",\n                      value: formData.priceCash,\n                      onChange: handleInputChange,\n                      min: \"0\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1111,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1109,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1108,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  md: 6,\n                  children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                      children: \"\\u0E23\\u0E32\\u0E04\\u0E32 (\\u0E0B\\u0E37\\u0E49\\u0E2D\\u0E2A\\u0E14\\u0E42\\u0E1B\\u0E23\\u0E42\\u0E21\\u0E0A\\u0E31\\u0E19)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1122,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                      type: \"number\",\n                      name: \"priceCashPromo\",\n                      value: formData.priceCashPromo,\n                      onChange: handleInputChange,\n                      min: \"0\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1123,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1121,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1120,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1107,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  md: 6,\n                  children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                      children: \"\\u0E23\\u0E32\\u0E04\\u0E32 (\\u0E0B\\u0E37\\u0E49\\u0E2D\\u0E1C\\u0E48\\u0E2D\\u0E19) \\u2014 \\u0E04\\u0E33\\u0E19\\u0E27\\u0E13\\u0E2D\\u0E31\\u0E15\\u0E42\\u0E19\\u0E21\\u0E31\\u0E15\\u0E34\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1137,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                      type: \"text\",\n                      readOnly: true,\n                      value: formatPrice(autoInstallmentPrice),\n                      className: \"bg-light fw-semibold\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1138,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n                      className: \"text-muted\",\n                      children: [\"\\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E04\\u0E34\\u0E14\\u0E08\\u0E32\\u0E01\\u0E23\\u0E32\\u0E04\\u0E32\\u0E40\\u0E07\\u0E34\\u0E19\\u0E2A\\u0E14 +10% \\u0E17\\u0E35\\u0E48 2 \\u0E07\\u0E27\\u0E14 \\u0E41\\u0E25\\u0E30\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E02\\u0E36\\u0E49\\u0E19\\u0E40\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E22\\u0E46 \\u0E08\\u0E19\\u0E16\\u0E36\\u0E07 \", DEFAULT_INSTALLMENT_PERIODS, \" \\u0E07\\u0E27\\u0E14 (+\", DEFAULT_INSTALLMENT_RATE_PERCENT, \"%)\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1144,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1136,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1135,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  md: 6,\n                  children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                      children: \"\\u0E23\\u0E32\\u0E04\\u0E32 (\\u0E0B\\u0E37\\u0E49\\u0E2D\\u0E1C\\u0E48\\u0E2D\\u0E19\\u0E42\\u0E1B\\u0E23\\u0E42\\u0E21\\u0E0A\\u0E31\\u0E19)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1151,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                      type: \"text\",\n                      readOnly: true,\n                      value: formData.priceCashPromo ? formatPrice(autoInstallmentPromoPrice) : '—',\n                      className: \"bg-light fw-semibold\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1152,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n                      className: \"text-muted\",\n                      children: \"\\u0E2B\\u0E32\\u0E01\\u0E21\\u0E35\\u0E23\\u0E32\\u0E04\\u0E32\\u0E42\\u0E1B\\u0E23\\u0E42\\u0E21\\u0E0A\\u0E31\\u0E19 \\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E08\\u0E30\\u0E04\\u0E33\\u0E19\\u0E27\\u0E13\\u0E23\\u0E32\\u0E04\\u0E32\\u0E40\\u0E07\\u0E34\\u0E19\\u0E1C\\u0E48\\u0E2D\\u0E19\\u0E08\\u0E32\\u0E01\\u0E23\\u0E32\\u0E04\\u0E32\\u0E42\\u0E1B\\u0E23\\u0E42\\u0E21\\u0E0A\\u0E31\\u0E19\\u0E43\\u0E2B\\u0E49\\u0E2D\\u0E31\\u0E15\\u0E42\\u0E19\\u0E21\\u0E31\\u0E15\\u0E34\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1162,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1150,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1149,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1134,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: \"\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1170,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  type: \"file\",\n                  accept: \"image/png, image/jpeg, image/jpg, image/webp\",\n                  onChange: handleImageChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1171,\n                  columnNumber: 19\n                }, this), imagePreview && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"text-muted d-block mb-1\",\n                    children: \"Preview:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1178,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"border rounded p-2\",\n                    style: {\n                      backgroundColor: '#f8f9fa'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: imagePreview,\n                      alt: \"Preview\",\n                      style: {\n                        maxWidth: '100%',\n                        maxHeight: '200px',\n                        objectFit: 'contain',\n                        display: 'block',\n                        margin: '0 auto'\n                      },\n                      onError: e => {\n                        console.error('Preview image load error:', imagePreview === null || imagePreview === void 0 ? void 0 : imagePreview.substring(0, 50));\n                        e.target.style.display = 'none';\n                      },\n                      onLoad: () => {\n                        console.log('Preview image loaded successfully');\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1180,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1179,\n                    columnNumber: 23\n                  }, this), imageFile && /*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"text-muted d-block mt-1\",\n                    children: [\"\\u0E44\\u0E1F\\u0E25\\u0E4C: \", imageFile.name, \" (\", (imageFile.size / 1024).toFixed(2), \" KB)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1200,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1177,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1169,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: \"URL \\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\\u0E2B\\u0E25\\u0E31\\u0E01 (\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E01\\u0E23\\u0E2D\\u0E01\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E44\\u0E1F\\u0E25\\u0E4C\\u0E2B\\u0E25\\u0E31\\u0E07\\u0E08\\u0E32\\u0E01\\u0E2D\\u0E31\\u0E1B\\u0E42\\u0E2B\\u0E25\\u0E14)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1209,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  type: \"text\",\n                  value: ((_formData$images = formData.images) === null || _formData$images === void 0 ? void 0 : _formData$images[0]) || '',\n                  onChange: e => {\n                    const value = e.target.value;\n                    handleImageFieldChange(0, value);\n                    // อัปเดต preview ทันทีเมื่อไม่มีไฟล์ที่อัปโหลด\n                    // ถ้ามีไฟล์ที่อัปโหลดอยู่แล้ว อย่าเปลี่ยน preview (ใช้ preview จาก FileReader)\n                    if (!imageFile) {\n                      if (value.trim()) {\n                        const previewUrl = resolveImagePreview(value);\n                        setImagePreview(previewUrl);\n                      } else {\n                        setImagePreview(null);\n                      }\n                    }\n                  },\n                  placeholder: \"\\u0E40\\u0E0A\\u0E48\\u0E19 /images/\\u0E42\\u0E0B\\u0E1F\\u0E32/product1.jpg \\u0E2B\\u0E23\\u0E37\\u0E2D https://example.com/product1.jpg \\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E44\\u0E1F\\u0E25\\u0E4C\\u0E2B\\u0E25\\u0E31\\u0E07\\u0E08\\u0E32\\u0E01\\u0E2D\\u0E31\\u0E1B\\u0E42\\u0E2B\\u0E25\\u0E14\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1210,\n                  columnNumber: 19\n                }, this), ((_formData$images2 = formData.images) === null || _formData$images2 === void 0 ? void 0 : _formData$images2[0]) && !imageFile && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"text-muted d-block mb-1\",\n                    children: \"Preview:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1231,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"border rounded p-2\",\n                    style: {\n                      backgroundColor: '#f8f9fa'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: resolveImagePreview(formData.images[0]),\n                      alt: \"Image Preview\",\n                      style: {\n                        maxWidth: '100%',\n                        maxHeight: '150px',\n                        objectFit: 'contain',\n                        display: 'block',\n                        margin: '0 auto'\n                      },\n                      onError: e => {\n                        console.error('Image preview load error:', resolveImagePreview(formData.images[0]));\n                        e.target.style.display = 'none';\n                      },\n                      onLoad: () => {\n                        console.log('Image preview loaded:', resolveImagePreview(formData.images[0]));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1233,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1232,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1230,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1208,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: [1, 2, 3].map(idx => {\n                  var _formData$images3;\n                  return /*#__PURE__*/_jsxDEV(Col, {\n                    md: 4,\n                    children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                      className: \"mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                        children: [\"\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E15\\u0E34\\u0E21 \", idx]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1260,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                        type: \"text\",\n                        value: ((_formData$images3 = formData.images) === null || _formData$images3 === void 0 ? void 0 : _formData$images3[idx]) || '',\n                        onChange: e => handleImageFieldChange(idx, e.target.value),\n                        placeholder: \"\\u0E40\\u0E0A\\u0E48\\u0E19 product1-alt.png\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1261,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1259,\n                      columnNumber: 23\n                    }, this)\n                  }, `extra-image-${idx}`, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1258,\n                    columnNumber: 21\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1256,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"admin-products-drawer__footer\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"secondary\",\n                  onClick: () => setIsDrawerOpen(false),\n                  className: \"me-2\",\n                  children: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1273,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"primary\",\n                  type: \"submit\",\n                  disabled: isLoading,\n                  children: isLoading ? 'กำลังบันทึก...' : 'บันทึก'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1280,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1272,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1056,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1055,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1044,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1042,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 892,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 875,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminProducts, \"oqpSInCuuKDPNgvYCotXClW7Yyk=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = AdminProducts;\nvar _c;\n$RefreshReg$(_c, \"AdminProducts\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","Link","useLocation","useNavigate","Container","Row","Col","Card","Table","Button","Form","Alert","axios","AdminHeader","NotificationBell","jsxDEV","_jsxDEV","formatPrice","value","numericValue","Number","isNaN","toLocaleString","minimumFractionDigits","maximumFractionDigits","parseNumeric","numeric","hasPromotionPrices","product","cash","price_cash","cashPromo","price_cash_promo","installment","price_installment","installmentPromo","price_installment_promo","DISPLAY_CATEGORY_OPTIONS","PROMOTION_FILTER_OPTIONS","label","MAX_PRODUCT_IMAGES","normalizeImageArray","source","Array","isArray","cleaned","map","item","String","trim","filter","Boolean","padded","slice","length","push","compactImages","images","INSTALLMENT_MIN_PERIODS","INSTALLMENT_MAX_PERIODS","DEFAULT_INSTALLMENT_PERIODS","getInstallmentRateByMonths","months","normalized","isFinite","calculateInstallmentPrice","basePrice","price","rate","Math","round","DEFAULT_INSTALLMENT_RATE_PERCENT","resolveImagePreview","trimmed","startsWith","parts","split","p","encodedParts","part","encodeURIComponent","e","join","includes","replace","pathToEncode","AdminProducts","admin","logout","isSidebarCollapsed","toggleSidebar","adminNotifications","markAdminOrdersSeen","markAdminCustomersSeen","markAdminPaymentsSeen","_s","_formData$images","_formData$images2","location","navigate","products","setProducts","categoryMap","setCategoryMap","Map","activeCategory","setActiveCategory","promotionFilter","setPromotionFilter","productSearch","setProductSearch","editingProduct","setEditingProduct","formData","setFormData","name","description","priceCash","priceCashPromo","highlights","displayCategory","fill","imageFile","setImageFile","imagePreview","setImagePreview","message","setMessage","show","text","variant","isLoading","setIsLoading","sortBy","setSortBy","isDrawerOpen","setIsDrawerOpen","selectedProducts","setSelectedProducts","Set","previousProductsCount","setPreviousProductsCount","alerts","setAlerts","playNotificationSound","audioContext","window","AudioContext","webkitAudioContext","oscillator","createOscillator","gainNode","createGain","connect","destination","frequency","type","gain","setValueAtTime","currentTime","exponentialRampToValueAtTime","start","stop","error","console","log","autoInstallmentPrice","autoInstallmentPromoPrice","getCategoryLabel","tags","categoryTag","tag","find","category_name","category_id","categoryIdString","id","entries","fetchProducts","fetchCategories","params","URLSearchParams","search","action","get","handleAdd","delete","nextSearch","toString","pathname","response","data","newProducts","newCount","prev","Date","now","timestamp","product_images","img","product_image","heroImage","handleInputChange","target","handleImageChange","file","files","size","reader","FileReader","onloadend","_reader$result","result","onerror","readAsDataURL","nextImages","handleImageFieldChange","index","handleEdit","_product$price_cash","_product$price_cash_p","imagesForState","existingDisplayCategory","fallbackCategory","resolvedDisplayCategory","product_name","product_description","handleSubmit","preventDefault","_categoryMap$get","imageList","displayCategoryTag","tagsToSend","categoryIdFromLabel","formDataUpload","FormData","append","uploadResponse","post","headers","uploadedImagePath","path","uploadError","_uploadError$response","_uploadError$response2","parsedPriceCash","parseFloat","parsedPriceCashPromo","computedInstallment","computedInstallmentPromo","dataToSend","categoryId","line","priceInstallment","priceInstallmentPromo","image","put","product_id","setTimeout","_error$response","_error$response$data","handleDelete","productId","confirm","handleViewDetails","url","open","columns","key","header","className","render","imageUrl","children","src","alt","onError","style","display","nextSibling","fileName","_jsxFileName","lineNumber","columnNumber","showPromotion","currentCashPrice","currentInstallmentPrice","originalCashPrice","originalInstallmentPrice","hasCashPromo","hasInstallmentPromo","formatPriceCompact","cashDisplay","installmentDisplay","highlight","idx","onClick","title","categoryFilters","allowedValues","has","categoryProducts","searchedProducts","keyword","toLowerCase","idMatch","nameMatch","filteredProducts","shouldHavePromo","hasPromo","sorted","sort","a","b","priceA","priceB","priceA2","priceB2","localeCompare","activeCategoryLabel","categoryCount","filteredCount","timer","clearTimeout","onLogout","isCollapsed","onToggleSidebar","to","dismissible","onClose","placeholder","onChange","event","onKeyDown","document","activeElement","focus","Select","option","Body","category","responsive","hover","column","onSubmit","Group","Label","Control","required","as","rows","md","min","readOnly","Text","accept","backgroundColor","maxWidth","maxHeight","objectFit","margin","substring","onLoad","toFixed","previewUrl","_formData$images3","disabled","_c","$RefreshReg$"],"sources":["D:/xampp/htdocs/Website_Sangswang/client/src/pages/admin/AdminProducts.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Card from 'react-bootstrap/Card';\nimport Table from 'react-bootstrap/Table';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport Alert from 'react-bootstrap/Alert';\nimport axios from 'axios';\nimport AdminHeader from '../../components/AdminHeader';\nimport NotificationBell from '../../components/NotificationBell';\nimport './AdminProducts.css';\n\nconst formatPrice = (value) => {\n  if (value == null || value === '') {\n    return '-';\n  }\n  const numericValue = Number(value);\n  if (Number.isNaN(numericValue)) {\n    return '-';\n  }\n  return `฿${numericValue.toLocaleString('th-TH', {\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0\n  })}`;\n};\n\nconst parseNumeric = (value) => {\n  if (value == null || value === '') {\n    return null;\n  }\n  const numeric = Number(value);\n  return Number.isNaN(numeric) ? null : numeric;\n};\n\nconst hasPromotionPrices = (product = {}) => {\n  const cash = parseNumeric(product.price_cash);\n  const cashPromo = parseNumeric(product.price_cash_promo);\n  if (cashPromo != null && (cash == null || cashPromo < cash)) {\n    return true;\n  }\n  const installment = parseNumeric(product.price_installment);\n  const installmentPromo = parseNumeric(product.price_installment_promo);\n  if (installmentPromo != null && (installment == null || installmentPromo < installment)) {\n    return true;\n  }\n  return false;\n};\n\nconst DISPLAY_CATEGORY_OPTIONS = [\n  'เตียงนอน',\n  'โซฟา',\n  'ชั้นวางทีวี',\n  'โต๊ะเครื่องแป้ง',\n  'ตู้เสื้อผ้า',\n  'ฟูกนอน/ที่นอน',\n  'ตู้โชว์',\n  'หิ้งพระ',\n  'ตู้กับข้าว',\n  'ตู้เสื้อผ้า + โต๊ะเครื่องแป้ง (เซ็ต)'\n];\n\nconst PROMOTION_FILTER_OPTIONS = [\n  { label: 'ทั้งหมด', value: 'all' },\n  { label: 'มีโปรฯ', value: 'promo' },\n  { label: 'ไม่มีโปรฯ', value: 'regular' }\n];\n\nconst MAX_PRODUCT_IMAGES = 4;\n\nconst normalizeImageArray = (value) => {\n  const source = Array.isArray(value) ? value : value ? [value] : [];\n  const cleaned = source\n    .map((item) => (item == null ? '' : String(item).trim()))\n    .filter(Boolean);\n  const padded = cleaned.slice(0, MAX_PRODUCT_IMAGES);\n  while (padded.length < MAX_PRODUCT_IMAGES) {\n    padded.push('');\n  }\n  return padded;\n};\n\nconst compactImages = (images = []) =>\n  images\n    .map((item) => (item == null ? '' : String(item).trim()))\n    .filter(Boolean)\n    .slice(0, MAX_PRODUCT_IMAGES);\n\nconst INSTALLMENT_MIN_PERIODS = 2;\nconst INSTALLMENT_MAX_PERIODS = 12;\nconst DEFAULT_INSTALLMENT_PERIODS = 12;\n\nconst getInstallmentRateByMonths = (months = DEFAULT_INSTALLMENT_PERIODS) => {\n  const normalized = Number(months);\n  if (!Number.isFinite(normalized) || normalized < INSTALLMENT_MIN_PERIODS) {\n    return 0;\n  }\n  // 2 เดือน: 10%, 3-12 เดือน: เพิ่มขึ้นเรื่อยๆ จนถึง 12 เดือนที่ 20%\n  if (normalized === INSTALLMENT_MIN_PERIODS) {\n    return 0.1; // 2 เดือน = 10%\n  }\n  if (normalized >= INSTALLMENT_MAX_PERIODS) {\n    return 0.2; // 12 เดือน = 20%\n  }\n  // 3-11 เดือน: คำนวณแบบ linear จาก 10% ถึง 20%\n  // rate = 0.1 + (months - 2) * (0.2 - 0.1) / (12 - 2)\n  return 0.1 + (normalized - INSTALLMENT_MIN_PERIODS) * (0.2 - 0.1) / (INSTALLMENT_MAX_PERIODS - INSTALLMENT_MIN_PERIODS);\n};\n\nconst calculateInstallmentPrice = (basePrice, months = DEFAULT_INSTALLMENT_PERIODS) => {\n  const price = Number(basePrice);\n  if (!Number.isFinite(price) || price <= 0) {\n    return null;\n  }\n  const rate = getInstallmentRateByMonths(months);\n  return Math.round(price * (1 + rate));\n};\n\nconst DEFAULT_INSTALLMENT_RATE_PERCENT = Math.round(\n  getInstallmentRateByMonths(DEFAULT_INSTALLMENT_PERIODS) * 100\n);\n\nconst resolveImagePreview = (value) => {\n  if (!value) {\n    return null;\n  }\n  const trimmed = String(value).trim();\n  if (!trimmed) {\n    return null;\n  }\n  // ถ้าเป็น data URI, blob URI, หรือ full URL ให้ใช้ตามนั้น\n  if (trimmed.startsWith('data:') || trimmed.startsWith('blob:') || trimmed.startsWith('http://') || trimmed.startsWith('https://')) {\n    return trimmed;\n  }\n  \n  // ดึงรูปภาพจากโฟลเดอร์ images โดยตรงผ่าน static file serving (ไม่ผ่าน API)\n  // ใช้ relative path เพื่อให้ React proxy ทำงาน\n  // สำหรับ path ที่มีอักขระภาษาไทย ต้อง encode แต่ละส่วนของ path\n  \n  // ถ้า path เริ่มต้นด้วย / แล้ว ให้ encode แต่ละส่วนของ path\n  if (trimmed.startsWith('/')) {\n    try {\n      // แยก path เป็นส่วนๆ และ encode แต่ละส่วน (ยกเว้น / หน้า)\n      const parts = trimmed.split('/').filter(p => p);\n      const encodedParts = parts.map(part => {\n        // Encode แต่ละส่วนของ path เพื่อให้ browser ส่งไปยัง server ถูกต้อง\n        try {\n          return encodeURIComponent(part);\n        } catch (e) {\n          return part;\n        }\n      });\n      return '/' + encodedParts.join('/');\n    } catch (e) {\n      return trimmed;\n    }\n  }\n  \n  // ถ้าเป็น path ปกติ ให้แปลงเป็น absolute path\n  if (trimmed.includes('/') || trimmed.includes('\\\\')) {\n    // แปลง backslash เป็น forward slash\n    const normalized = trimmed.replace(/\\\\/g, '/');\n    // ถ้าไม่มี / หน้า ให้เพิ่ม\n    const pathToEncode = normalized.startsWith('/') ? normalized : `/${normalized}`;\n    try {\n      const parts = pathToEncode.split('/').filter(p => p);\n      const encodedParts = parts.map(part => {\n        try {\n          return encodeURIComponent(part);\n        } catch (e) {\n          return part;\n        }\n      });\n      return '/' + encodedParts.join('/');\n    } catch (e) {\n      return pathToEncode;\n    }\n  }\n  \n  // ถ้าเป็นแค่ชื่อไฟล์ ให้ encode และใส่ใน /images/\n  try {\n    return `/images/${encodeURIComponent(trimmed)}`;\n  } catch (e) {\n    return `/images/${trimmed}`;\n  }\n};\n\nexport default function AdminProducts({\n  admin,\n  logout,\n  isSidebarCollapsed,\n  toggleSidebar,\n  adminNotifications,\n  markAdminOrdersSeen,\n  markAdminCustomersSeen,\n  markAdminPaymentsSeen\n}) {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [products, setProducts] = useState([]);\n  const [categoryMap, setCategoryMap] = useState(new Map());\n  const [activeCategory, setActiveCategory] = useState('all');\n  const [promotionFilter, setPromotionFilter] = useState('all');\n  const [productSearch, setProductSearch] = useState('');\n  const [editingProduct, setEditingProduct] = useState(null);\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    priceCash: '',\n    priceCashPromo: '',\n    highlights: '',\n    displayCategory: DISPLAY_CATEGORY_OPTIONS[0] || '',\n    images: Array(MAX_PRODUCT_IMAGES).fill('')\n  });\n  const [imageFile, setImageFile] = useState(null);\n  const [imagePreview, setImagePreview] = useState(null);\n  const [message, setMessage] = useState({ show: false, text: '', variant: '' });\n  const [isLoading, setIsLoading] = useState(false);\n  const [sortBy, setSortBy] = useState('newest');\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const [selectedProducts, setSelectedProducts] = useState(new Set());\n  const [previousProductsCount, setPreviousProductsCount] = useState(0);\n  const [alerts, setAlerts] = useState([]);\n\n  const playNotificationSound = () => {\n    try {\n      // สร้างเสียงเตือนแบบ beep\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      const oscillator = audioContext.createOscillator();\n      const gainNode = audioContext.createGain();\n      \n      oscillator.connect(gainNode);\n      gainNode.connect(audioContext.destination);\n      \n      oscillator.frequency.value = 800; // ความถี่เสียง\n      oscillator.type = 'sine';\n      \n      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\n      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);\n      \n      oscillator.start(audioContext.currentTime);\n      oscillator.stop(audioContext.currentTime + 0.3);\n    } catch (error) {\n      console.log('ไม่สามารถเล่นเสียงเตือนได้:', error);\n    }\n  };\n  const autoInstallmentPrice = useMemo(\n    () => calculateInstallmentPrice(formData.priceCash),\n    [formData.priceCash]\n  );\n  const autoInstallmentPromoPrice = useMemo(\n    () => calculateInstallmentPrice(formData.priceCashPromo),\n    [formData.priceCashPromo]\n  );\n\n  const getCategoryLabel = (product) => {\n    if (!product) {\n      return '-';\n    }\n\n    if (Array.isArray(product.tags) && product.tags.length > 0) {\n      const categoryTag = product.tags\n        .map((tag) => (tag == null ? '' : String(tag).trim()))\n        .find((tag) => DISPLAY_CATEGORY_OPTIONS.includes(tag));\n      if (categoryTag) {\n        return categoryTag;\n      }\n    }\n\n    if (product.category_name && String(product.category_name).trim()) {\n      const label = String(product.category_name).trim();\n      if (DISPLAY_CATEGORY_OPTIONS.includes(label)) {\n        return label;\n      }\n    }\n\n    if (product.category_id != null) {\n      const categoryIdString = String(product.category_id);\n      for (const [label, id] of categoryMap.entries()) {\n        if (String(id) === categoryIdString) {\n          return label;\n        }\n      }\n    }\n\n    return '-';\n  };\n\n  useEffect(() => {\n    fetchProducts();\n    fetchCategories();\n  }, []);\n\n  // ไม่แสดง popup alerts แล้ว ใช้ notification bell แทน\n\n  useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    const action = params.get('action');\n    if (action === 'add') {\n      handleAdd();\n      params.delete('action');\n      const nextSearch = params.toString();\n      navigate(\n        { pathname: location.pathname, search: nextSearch ? `?${nextSearch}` : '' },\n        { replace: true }\n      );\n    }\n  }, [location.pathname, location.search, navigate]);\n\n  const fetchCategories = async () => {\n    try {\n      const response = await axios.get('/api/categories');\n      const data = Array.isArray(response.data) ? response.data : [];\n      const map = new Map(\n        data.map((item) => [(item.category_name || '').trim(), item.category_id])\n      );\n      setCategoryMap(map);\n    } catch (error) {\n      console.error('Error fetching categories:', error);\n      setCategoryMap(new Map());\n    }\n  };\n\n  const fetchProducts = async () => {\n    try {\n      const response = await axios.get('/api/products');\n      const newProducts = response.data || [];\n      \n      // ตรวจสอบว่ามีสินค้าใหม่หรือไม่\n      if (previousProductsCount > 0 && !isLoading && newProducts.length > previousProductsCount) {\n        const newCount = newProducts.length - previousProductsCount;\n        setAlerts(prev => [...prev, {\n          id: Date.now(),\n          type: 'info',\n          message: `มีสินค้าใหม่ ${newCount} รายการ`,\n          timestamp: new Date()\n        }]);\n      }\n      \n      const normalized = newProducts.map((item) => {\n        const images = Array.isArray(item.product_images)\n          ? item.product_images\n              .map((img) => (img == null ? '' : String(img).trim()))\n              .filter(Boolean)\n          : item.product_image\n          ? [String(item.product_image).trim()]\n          : [];\n        const heroImage = images[0] || (item.product_image ? String(item.product_image).trim() : '');\n        return {\n          ...item,\n          category_id: item.category_id != null ? String(item.category_id) : '',\n          category_name: (item.category_name || '').trim(),\n          tags: Array.isArray(item.tags)\n            ? item.tags\n                .map((tag) => (tag == null ? '' : String(tag).trim()))\n                .filter(Boolean)\n            : [],\n          product_image: heroImage,\n          product_images: images,\n          highlights: Array.isArray(item.highlights) ? item.highlights : []\n        };\n      });\n      \n      // ตรวจสอบว่ามีสินค้าใหม่หรือไม่\n      if (previousProductsCount > 0 && !isLoading && normalized.length > previousProductsCount) {\n        const newCount = normalized.length - previousProductsCount;\n        playNotificationSound();\n        setAlerts(prev => [...prev, {\n          id: Date.now(),\n          type: 'info',\n          message: `มีสินค้าใหม่ ${newCount} รายการ`,\n          timestamp: new Date()\n        }]);\n      }\n      \n      setProducts(normalized);\n      setPreviousProductsCount(normalized.length);\n      // setActiveCategory((prev) => { // This line is removed as per the edit hint\n      //   if (prev === 'all') {\n      //     return prev;\n      //   }\n      //   const hasCategory = normalized.some((item) => {\n      //     const categoryId = item.category_id != null ? String(item.category_id) : '';\n      //     return categoryId === prev;\n      //   });\n      //   return hasCategory ? prev : 'all';\n      // });\n    } catch (error) {\n      console.error('Error fetching products:', error);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleImageChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      console.log('File selected:', file.name, file.type, file.size);\n      setImageFile(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        console.log('FileReader loaded, result length:', reader.result?.length);\n        setImagePreview(reader.result);\n      };\n      reader.onerror = (error) => {\n        console.error('FileReader error:', error);\n        setImagePreview(null);\n      };\n      reader.readAsDataURL(file);\n      // อัปเดต formData.images[0] เป็นชื่อไฟล์ (แต่ preview จะใช้ data URL จาก FileReader)\n      setFormData((prev) => {\n        const nextImages = [...prev.images];\n        nextImages[0] = file.name;\n        return { ...prev, images: nextImages };\n      });\n    } else {\n      console.log('No file selected');\n      setImageFile(null);\n      setImagePreview(null);\n    }\n  };\n\n  const handleImageFieldChange = (index, value) => {\n    setFormData((prev) => {\n      const nextImages = [...prev.images];\n      nextImages[index] = value;\n      return { ...prev, images: nextImages };\n    });\n    if (index === 0 && !imageFile) {\n      setImagePreview(resolveImagePreview(value));\n    } else if (index === 0 && imageFile) {\n      setImageFile(null);\n      setImagePreview(resolveImagePreview(value));\n    }\n  };\n\n  const handleEdit = (product) => {\n    setEditingProduct(product);\n    const imagesForState = normalizeImageArray(\n      Array.isArray(product.product_images) && product.product_images.length > 0\n        ? product.product_images\n        : product.product_image\n        ? [product.product_image]\n        : []\n    );\n    const existingDisplayCategory = Array.isArray(product.tags)\n      ? product.tags\n          .map((tag) => (tag == null ? '' : String(tag).trim()))\n          .find((tag) => DISPLAY_CATEGORY_OPTIONS.includes(tag))\n      : '';\n    const fallbackCategory = getCategoryLabel(product);\n    const resolvedDisplayCategory = DISPLAY_CATEGORY_OPTIONS.includes(existingDisplayCategory)\n      ? existingDisplayCategory\n      : DISPLAY_CATEGORY_OPTIONS.includes(fallbackCategory)\n      ? fallbackCategory\n      : DISPLAY_CATEGORY_OPTIONS[0] || '';\n\n    setFormData({\n      name: product.product_name,\n      description: product.product_description || '',\n      priceCash: product.price_cash ?? '',\n      priceCashPromo: product.price_cash_promo ?? '',\n      highlights: (product.highlights || []).join('\\n'),\n      displayCategory: resolvedDisplayCategory,\n      images: imagesForState\n    });\n    setImageFile(null);\n    setImagePreview(resolveImagePreview(imagesForState[0]));\n    setIsDrawerOpen(true);\n  };\n\n  const handleAdd = () => {\n    setEditingProduct(null);\n    setFormData({\n      name: '',\n      description: '',\n      priceCash: '',\n      priceCashPromo: '',\n      highlights: '',\n      displayCategory: DISPLAY_CATEGORY_OPTIONS[0] || '',\n      images: Array(MAX_PRODUCT_IMAGES).fill('')\n    });\n    setImageFile(null);\n    setImagePreview(null);\n    setIsDrawerOpen(true);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      let imageList = compactImages(formData.images);\n      const displayCategoryTag = formData.displayCategory\n        ? String(formData.displayCategory).trim()\n        : '';\n      const tagsToSend = displayCategoryTag ? [displayCategoryTag] : [];\n      const categoryIdFromLabel = displayCategoryTag\n        ? categoryMap.get(displayCategoryTag) ?? null\n        : null;\n\n      // ถ้ามีไฟล์ที่เลือก ให้อัปโหลดไฟล์ก่อน\n      if (imageFile) {\n        try {\n          const formDataUpload = new FormData();\n          formDataUpload.append('image', imageFile);\n          if (displayCategoryTag) {\n            formDataUpload.append('category', displayCategoryTag);\n          }\n\n          const uploadResponse = await axios.post('/api/upload', formDataUpload, {\n            headers: {\n              'Content-Type': 'multipart/form-data',\n            },\n          });\n\n          // ใช้ path จาก server\n          const uploadedImagePath = uploadResponse.data.path;\n          if (uploadedImagePath) {\n            imageList[0] = uploadedImagePath;\n            // อัปเดต formData.images[0] ด้วย path ที่อัปโหลด\n            setFormData((prev) => {\n              const nextImages = [...prev.images];\n              nextImages[0] = uploadedImagePath;\n              return { ...prev, images: nextImages };\n            });\n          }\n        } catch (uploadError) {\n          console.error('Error uploading image:', uploadError);\n          setMessage({ \n            show: true, \n            text: uploadError.response?.data?.error || 'อัปโหลดไฟล์ไม่สำเร็จ', \n            variant: 'danger' \n          });\n          setIsLoading(false);\n          return;\n        }\n      }\n\n      const parsedPriceCash = formData.priceCash !== '' ? parseFloat(formData.priceCash) : null;\n      const parsedPriceCashPromo =\n        formData.priceCashPromo !== '' ? parseFloat(formData.priceCashPromo) : null;\n      const computedInstallment = calculateInstallmentPrice(parsedPriceCash);\n      const computedInstallmentPromo =\n        parsedPriceCashPromo != null\n          ? calculateInstallmentPrice(parsedPriceCashPromo)\n          : null;\n\n      const dataToSend = {\n        name: formData.name,\n        description: formData.description,\n        categoryId: categoryIdFromLabel,\n        tags: tagsToSend,\n        highlights: formData.highlights\n          .split('\\n')\n          .map((line) => line.trim())\n          .filter(Boolean),\n        priceCash: parsedPriceCash,\n        priceCashPromo: parsedPriceCashPromo,\n        priceInstallment: computedInstallment,\n        priceInstallmentPromo: computedInstallmentPromo,\n        image: imageList[0] || '',\n        images: imageList\n      };\n      \n      if (editingProduct) {\n        await axios.put(`/api/products/${editingProduct.product_id}`, dataToSend);\n        setMessage({ show: true, text: 'แก้ไขสินค้าสำเร็จ', variant: 'success' });\n      } else {\n        await axios.post('/api/products', dataToSend);\n        setMessage({ show: true, text: 'เพิ่มสินค้าสำเร็จ', variant: 'success' });\n      }\n      \n      fetchProducts();\n      setIsDrawerOpen(false);\n      setImageFile(null);\n      setImagePreview(null);\n      setMessage({ show: true, text: editingProduct ? 'แก้ไขสินค้าสำเร็จ ✅' : 'เพิ่มสินค้าสำเร็จ ✅', variant: 'success' });\n      setTimeout(() => setMessage({ show: false }), 3000);\n    } catch (error) {\n      console.error('Error saving product:', error);\n      setMessage({ show: true, text: error.response?.data?.error || 'เกิดข้อผิดพลาด', variant: 'danger' });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleDelete = async (productId) => {\n    if (!window.confirm('ยืนยันการลบสินค้านี้?')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`/api/products/${productId}`);\n      setMessage({ show: true, text: 'ลบสินค้าสำเร็จ ✅', variant: 'success' });\n      fetchProducts();\n      setTimeout(() => setMessage({ show: false }), 3000);\n    } catch (error) {\n      console.error('Error deleting product:', error);\n      setMessage({ show: true, text: 'เกิดข้อผิดพลาด', variant: 'danger' });\n    }\n  };\n\n  const handleViewDetails = (product) => {\n    if (!product || !product.product_id) {\n      return;\n    }\n    // เปิดหน้ารายละเอียดสินค้าแบบเดียวกับที่ลูกค้าเห็น ในแท็บใหม่\n    const url = `/products/${product.product_id}`;\n    window.open(url, '_blank', 'noopener,noreferrer');\n  };\n\n  const columns = [\n    {\n      key: 'product_id',\n      header: 'ID',\n      className: 'text-center product-id-col',\n      render: (product) => product.product_id\n    },\n    {\n      key: 'product_image',\n      header: 'รูปภาพ',\n      className: 'product-image-col',\n      render: (product) => {\n        const imageUrl = resolveImagePreview(product.product_image);\n        return (\n          <div className=\"product-image-cell\">\n            {imageUrl ? (\n              <img\n                src={imageUrl}\n                alt={product.product_name || 'Product'}\n                className=\"product-image-thumbnail\"\n                onError={(e) => {\n                  console.error('Image load error:', imageUrl);\n                  e.target.style.display = 'none';\n                  e.target.nextSibling.style.display = 'block';\n                }}\n              />\n            ) : null}\n            <div className=\"product-image-placeholder\" style={{ display: imageUrl ? 'none' : 'block' }}>\n              <i className=\"bi bi-image\"></i>\n            </div>\n          </div>\n        );\n      }\n    },\n    {\n      key: 'product_name',\n      header: 'สินค้า',\n      className: 'product-name-col',\n      render: (product) => {\n        const showPromotion = hasPromotionPrices(product);\n        return (\n          <div className=\"product-name-cell\">\n            <div className=\"product-name-cell__main\">\n              <span className=\"product-name-cell__name\">{product.product_name}</span>\n              {showPromotion && <span className=\"product-promo-badge\">มีโปรฯ</span>}\n            </div>\n            <div className=\"product-name-cell__meta\">\n              <span className=\"product-name-cell__category\">{getCategoryLabel(product)}</span>\n            </div>\n          </div>\n        );\n      }\n    },\n    {\n      key: 'category',\n      header: 'หมวดหมู่',\n      className: 'category-col text-muted',\n      render: (product) => getCategoryLabel(product)\n    },\n    {\n      key: 'price_summary',\n      header: 'ราคาขาย(สด/ผ่อน)',\n      className: 'price-summary-col',\n      render: (product) => {\n        // ราคาขายปัจจุบัน = ราคาโปรโมชัน (ถ้ามี) หรือ ราคาปกติ\n        const cashPromo = parseNumeric(product.price_cash_promo);\n        const cash = parseNumeric(product.price_cash);\n        const installmentPromo = parseNumeric(product.price_installment_promo);\n        const installment = parseNumeric(product.price_installment);\n        \n        // หาราคาขายปัจจุบัน (โปรโมชันก่อน ถ้าไม่มีใช้ราคาปกติ)\n        const currentCashPrice = cashPromo || cash;\n        const currentInstallmentPrice = installmentPromo || installment;\n        const originalCashPrice = cash;\n        const originalInstallmentPrice = installment;\n        const hasCashPromo = cashPromo && cashPromo < cash;\n        const hasInstallmentPromo = installmentPromo && installmentPromo < installment;\n        \n        if (!currentCashPrice && !currentInstallmentPrice) {\n          return <span className=\"text-muted\">ยังไม่ระบุ</span>;\n        }\n\n        // Format price without currency symbol for compact display\n        const formatPriceCompact = (value) => {\n          if (value == null || value === '') {\n            return '-';\n          }\n          const numericValue = Number(value);\n          if (Number.isNaN(numericValue)) {\n            return '-';\n          }\n          return numericValue.toLocaleString('th-TH', {\n            minimumFractionDigits: 0,\n            maximumFractionDigits: 0\n          });\n        };\n\n        const cashDisplay = currentCashPrice ? formatPriceCompact(currentCashPrice) : '-';\n        const installmentDisplay = currentInstallmentPrice ? formatPriceCompact(currentInstallmentPrice) : '-';\n\n        return (\n          <div className=\"product-price-cell\">\n            <div className=\"product-price-cell__compact\">\n              <span className=\"product-price-cell__compact-price\">\n                {cashDisplay}/{installmentDisplay}\n              </span>\n            </div>\n          </div>\n        );\n      }\n    },\n    {\n      key: 'highlights',\n      header: 'รายละเอียด',\n      className: 'highlights-col',\n      render: (product) =>\n        product.highlights && product.highlights.length > 0 ? (\n          <div className=\"product-highlights\">\n            {product.highlights.slice(0, 2).map((highlight, idx) => (\n              <div key={idx} className=\"product-highlight-item\">\n                {highlight}\n              </div>\n            ))}\n            {product.highlights.length > 2 && (\n              <div className=\"product-highlight-item text-muted\">...</div>\n            )}\n          </div>\n        ) : (\n          <span className=\"text-muted\">-</span>\n        )\n    },\n    {\n      key: 'actions',\n      header: 'จัดการ',\n      className: 'text-nowrap text-end actions-col',\n      render: (product) => (\n        <div className=\"admin-product-actions\">\n          <button\n            className=\"admin-product-action-btn admin-product-action-btn--view\"\n            onClick={() => handleViewDetails(product)}\n            title=\"ดูรายละเอียด\"\n          >\n            <i className=\"bi bi-eye\"></i>\n          </button>\n          <button\n            className=\"admin-product-action-btn admin-product-action-btn--edit\"\n            onClick={() => handleEdit(product)}\n            title=\"แก้ไข\"\n          >\n            <i className=\"bi bi-pencil\"></i>\n          </button>\n          <button\n            className=\"admin-product-action-btn admin-product-action-btn--delete\"\n            onClick={() => handleDelete(product.product_id)}\n            title=\"ลบ\"\n          >\n            <i className=\"bi bi-trash\"></i>\n          </button>\n        </div>\n      )\n    }\n  ];\n\n  const categoryFilters = useMemo(() => {\n    return [\n      { label: 'ทั้งหมด', value: 'all' },\n      ...DISPLAY_CATEGORY_OPTIONS.map((label) => ({\n        label,\n        value: label\n      }))\n    ];\n  }, []);\n\n  useEffect(() => {\n    const allowedValues = new Set(['all', ...DISPLAY_CATEGORY_OPTIONS]);\n    if (!allowedValues.has(activeCategory)) {\n      setActiveCategory('all');\n    }\n  }, [activeCategory]);\n\n  const categoryProducts = useMemo(() => {\n    if (activeCategory === 'all') {\n      return products;\n    }\n    return products.filter((product) => getCategoryLabel(product) === activeCategory);\n  }, [products, activeCategory]);\n\n  const searchedProducts = useMemo(() => {\n    const trimmed = productSearch.replace(/#/g, '').trim();\n    if (!trimmed) {\n      return categoryProducts;\n    }\n    const keyword = trimmed.toLowerCase();\n    return categoryProducts.filter((product) => {\n      const idMatch = String(product.product_id).toLowerCase().includes(keyword);\n      const nameMatch = (product.product_name || '').toLowerCase().includes(keyword);\n      return idMatch || nameMatch;\n    });\n  }, [categoryProducts, productSearch]);\n\n  const filteredProducts = useMemo(() => {\n    let result = searchedProducts;\n    \n    // Apply promotion filter\n    if (promotionFilter !== 'all') {\n      const shouldHavePromo = promotionFilter === 'promo';\n      result = result.filter((product) => {\n        const hasPromo = hasPromotionPrices(product);\n        return shouldHavePromo ? hasPromo : !hasPromo;\n      });\n    }\n    \n    // Apply sorting\n    const sorted = [...result].sort((a, b) => {\n      switch (sortBy) {\n        case 'newest':\n          return b.product_id - a.product_id;\n        case 'oldest':\n          return a.product_id - b.product_id;\n        case 'price_asc':\n          const priceA = parseNumeric(a.price_cash) || parseNumeric(a.price_installment) || 0;\n          const priceB = parseNumeric(b.price_cash) || parseNumeric(b.price_installment) || 0;\n          return priceA - priceB;\n        case 'price_desc':\n          const priceA2 = parseNumeric(a.price_cash) || parseNumeric(a.price_installment) || 0;\n          const priceB2 = parseNumeric(b.price_cash) || parseNumeric(b.price_installment) || 0;\n          return priceB2 - priceA2;\n        case 'name_asc':\n          return (a.product_name || '').localeCompare(b.product_name || '', 'th');\n        case 'name_desc':\n          return (b.product_name || '').localeCompare(a.product_name || '', 'th');\n        default:\n          return 0;\n      }\n    });\n    \n    return sorted;\n  }, [searchedProducts, promotionFilter, sortBy]);\n\n  const activeCategoryLabel = activeCategory === 'all' ? '' : activeCategory;\n  const categoryCount = categoryProducts.length;\n  const filteredCount = filteredProducts.length;\n\n  // Auto-remove alerts after 5 seconds\n  useEffect(() => {\n    if (alerts.length > 0) {\n      const timer = setTimeout(() => {\n        setAlerts(prev => prev.slice(1));\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [alerts]);\n\n  return (\n    <div className=\"admin-products-page\">\n      <AdminHeader\n        admin={admin}\n        onLogout={logout}\n        isCollapsed={isSidebarCollapsed}\n        onToggleSidebar={toggleSidebar}\n        adminNotifications={adminNotifications}\n        markAdminOrdersSeen={markAdminOrdersSeen}\n        markAdminCustomersSeen={markAdminCustomersSeen}\n        markAdminPaymentsSeen={markAdminPaymentsSeen}\n      />\n      <NotificationBell\n        adminNotifications={adminNotifications}\n        markAdminOrdersSeen={markAdminOrdersSeen}\n        markAdminCustomersSeen={markAdminCustomersSeen}\n        markAdminPaymentsSeen={markAdminPaymentsSeen}\n      />\n      <Container className=\"py-5\">\n        <div className=\"admin-products-topbar mb-4\">\n          <div className=\"admin-products-topbar__title\">\n            <h2 className=\"mb-1\">จัดการสินค้า</h2>\n            <p className=\"text-muted small mb-0\">\n              ดูและจัดระเบียบสินค้าพร้อมค้นหาด้วยชื่อหรือรหัสได้ทันที\n            </p>\n          </div>\n          <Link to=\"/admin/dashboard\">\n            <Button variant=\"outline-secondary\" className=\"admin-products-back\">\n              <i className=\"bi bi-arrow-left me-2\"></i>\n              ย้อนกลับ\n            </Button>\n          </Link>\n        </div>\n\n        {message.show && (\n          <Alert variant={message.variant} dismissible onClose={() => setMessage({ show: false })}>\n            {message.text}\n          </Alert>\n        )}\n\n        {/* Toolbar */}\n        <div className=\"admin-products-toolbar\">\n          <div className=\"admin-products-toolbar__search\">\n            <i className=\"bi bi-search\"></i>\n            <input\n              type=\"text\"\n              placeholder=\"ค้นหาด้วยชื่อสินค้า, หมวดหมู่ หรือรหัสสินค้า\"\n              value={productSearch}\n              onChange={(event) => setProductSearch(event.target.value)}\n              onKeyDown={(e) => {\n                if (e.key === '/' && e.target !== document.activeElement) {\n                  e.preventDefault();\n                  e.target.focus();\n                }\n              }}\n            />\n            {productSearch && (\n              <button\n                type=\"button\"\n                className=\"admin-products-toolbar__search-clear\"\n                onClick={() => setProductSearch('')}\n                aria-label=\"ล้างการค้นหา\"\n              >\n                <i className=\"bi bi-x-circle\"></i>\n              </button>\n            )}\n          </div>\n          <div className=\"admin-products-toolbar__filters\">\n            <div className=\"admin-products-toolbar__filter\">\n              <i className=\"bi bi-funnel\"></i>\n              <Form.Select\n                value={promotionFilter}\n                onChange={(event) => setPromotionFilter(event.target.value)}\n              >\n                {PROMOTION_FILTER_OPTIONS.map((option) => (\n                  <option key={option.value} value={option.value}>\n                    {option.label}\n                  </option>\n                ))}\n              </Form.Select>\n            </div>\n            <div className=\"admin-products-toolbar__filter\">\n              <i className=\"bi bi-sort-down\"></i>\n              <Form.Select\n                value={sortBy}\n                onChange={(event) => setSortBy(event.target.value)}\n              >\n                <option value=\"newest\">ใหม่ล่าสุด</option>\n                <option value=\"oldest\">เก่าที่สุด</option>\n                <option value=\"price_asc\">ราคา: ต่ำ → สูง</option>\n                <option value=\"price_desc\">ราคา: สูง → ต่ำ</option>\n                <option value=\"name_asc\">ชื่อ: ก → ฮ</option>\n                <option value=\"name_desc\">ชื่อ: ฮ → ก</option>\n              </Form.Select>\n            </div>\n          </div>\n          <Button variant=\"primary\" onClick={handleAdd} className=\"admin-products-toolbar__add\">\n            <i className=\"bi bi-plus-lg me-2\"></i>\n            เพิ่มสินค้า\n          </Button>\n        </div>\n\n        {/* Product Summary */}\n        <div className=\"admin-products-summary\">\n          <span className=\"admin-products-summary__label\">สินค้าทั้งหมด</span>\n          <strong className=\"admin-products-summary__count\">ทั้งหมด {filteredCount} รายการ</strong>\n        </div>\n\n        <Card className=\"admin-products-card\">\n          <Card.Body>\n\n            <div className=\"mb-4\">\n              <div className=\"category-filter-label mb-2\">หมวดหมู่</div>\n              <div className=\"admin-category-filter\">\n                {categoryFilters.map((category) => (\n                  <button\n                    key={category.value}\n                    type=\"button\"\n                    className={`category-chip ${activeCategory === category.value ? 'active' : ''}`}\n                    onClick={() => setActiveCategory(category.value)}\n                    aria-label={`กรองหมวดหมู่ ${category.label}`}\n                  >\n                    {category.label}\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            {filteredProducts.length === 0 ? (\n              <div className=\"admin-products-empty\">\n                <div className=\"admin-products-empty__icon\">\n                  <i className=\"bi bi-inbox\"></i>\n                </div>\n                <h4>ยังไม่มีสินค้าในระบบ</h4>\n                <p className=\"text-muted\">เริ่มต้นด้วยการเพิ่มสินค้าใหม่</p>\n                <Button variant=\"primary\" onClick={handleAdd}>\n                  <i className=\"bi bi-plus-lg me-2\"></i>\n                  เพิ่มสินค้าใหม่\n                </Button>\n              </div>\n            ) : (\n              <Table responsive hover className=\"admin-products-table align-middle\">\n                <thead>\n                  <tr>\n                    {columns.map((column) => (\n                      <th key={column.key} className={column.header === 'จัดการ' ? 'text-end' : ''}>\n                        {column.header}\n                      </th>\n                    ))}\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredProducts.map((product) => (\n                    <tr key={product.product_id}>\n                      {columns.map((column) => (\n                        <td key={`${product.product_id}-${column.key}`} className={column.className}>\n                          {column.render(product)}\n                        </td>\n                      ))}\n                    </tr>\n                  ))}\n                </tbody>\n              </Table>\n            )}\n          </Card.Body>\n        </Card>\n\n        {/* Drawer for Add/Edit Product */}\n        <div className={`admin-products-drawer ${isDrawerOpen ? 'admin-products-drawer--open' : ''}`}>\n          <div className=\"admin-products-drawer__overlay\" onClick={() => setIsDrawerOpen(false)}></div>\n          <div className=\"admin-products-drawer__content\">\n            <div className=\"admin-products-drawer__header\">\n              <h3>{editingProduct ? 'แก้ไขสินค้า' : 'เพิ่มสินค้าใหม่'}</h3>\n              <button\n                className=\"admin-products-drawer__close\"\n                onClick={() => setIsDrawerOpen(false)}\n                aria-label=\"ปิด\"\n              >\n                <i className=\"bi bi-x-lg\"></i>\n              </button>\n            </div>\n            <div className=\"admin-products-drawer__body\">\n              <Form onSubmit={handleSubmit}>\n                <Form.Group className=\"mb-3\">\n                  <Form.Label>ชื่อสินค้า</Form.Label>\n                  <Form.Control\n                    type=\"text\"\n                    name=\"name\"\n                    value={formData.name}\n                    onChange={handleInputChange}\n                    required\n                  />\n                </Form.Group>\n\n                <Form.Group className=\"mb-3\">\n                  <Form.Label>คำอธิบาย</Form.Label>\n                  <Form.Control\n                    as=\"textarea\"\n                    rows={3}\n                    name=\"description\"\n                    value={formData.description}\n                    onChange={handleInputChange}\n                    required\n                  />\n                </Form.Group>\n\n                <Form.Group className=\"mb-3\">\n                  <Form.Label>หมวดหมู่</Form.Label>\n                  <Form.Select\n                    name=\"displayCategory\"\n                    value={formData.displayCategory}\n                    onChange={handleInputChange}\n                  >\n                    {DISPLAY_CATEGORY_OPTIONS.map((option) => (\n                      <option key={option} value={option}>\n                        {option}\n                      </option>\n                    ))}\n                  </Form.Select>\n                </Form.Group>\n\n                <Form.Group className=\"mb-3\">\n                  <Form.Label>รายละเอียดสินค้า (หนึ่งรายการต่อบรรทัด)</Form.Label>\n                  <Form.Control\n                    as=\"textarea\"\n                    rows={4}\n                    name=\"highlights\"\n                    value={formData.highlights}\n                    onChange={handleInputChange}\n                    placeholder=\"เช่น&#10;- หนังแท้เกรดพรีเมียม&#10;- โครงสร้างรับประกัน 5 ปี\"\n                  />\n                </Form.Group>\n\n                <Row>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>ราคา (ซื้อสด)</Form.Label>\n                      <Form.Control\n                        type=\"number\"\n                        name=\"priceCash\"\n                        value={formData.priceCash}\n                        onChange={handleInputChange}\n                        min=\"0\"\n                      />\n                    </Form.Group>\n                  </Col>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>ราคา (ซื้อสดโปรโมชัน)</Form.Label>\n                      <Form.Control\n                        type=\"number\"\n                        name=\"priceCashPromo\"\n                        value={formData.priceCashPromo}\n                        onChange={handleInputChange}\n                        min=\"0\"\n                      />\n                    </Form.Group>\n                  </Col>\n                </Row>\n\n                <Row>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>ราคา (ซื้อผ่อน) — คำนวณอัตโนมัติ</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        readOnly\n                        value={formatPrice(autoInstallmentPrice)}\n                        className=\"bg-light fw-semibold\"\n                      />\n                      <Form.Text className=\"text-muted\">\n                        ระบบคิดจากราคาเงินสด +10% ที่ 2 งวด และเพิ่มขึ้นเรื่อยๆ จนถึง {DEFAULT_INSTALLMENT_PERIODS} งวด (+{DEFAULT_INSTALLMENT_RATE_PERCENT}%)\n                      </Form.Text>\n                    </Form.Group>\n                  </Col>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>ราคา (ซื้อผ่อนโปรโมชัน)</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        readOnly\n                        value={\n                          formData.priceCashPromo\n                            ? formatPrice(autoInstallmentPromoPrice)\n                            : '—'\n                        }\n                        className=\"bg-light fw-semibold\"\n                      />\n                      <Form.Text className=\"text-muted\">\n                        หากมีราคาโปรโมชัน ระบบจะคำนวณราคาเงินผ่อนจากราคาโปรโมชันให้อัตโนมัติ\n                      </Form.Text>\n                    </Form.Group>\n                  </Col>\n                </Row>\n\n                <Form.Group className=\"mb-3\">\n                  <Form.Label>รูปภาพ</Form.Label>\n                  <Form.Control\n                    type=\"file\"\n                    accept=\"image/png, image/jpeg, image/jpg, image/webp\"\n                    onChange={handleImageChange}\n                  />\n                  {imagePreview && (\n                    <div className=\"mt-2\">\n                      <small className=\"text-muted d-block mb-1\">Preview:</small>\n                      <div className=\"border rounded p-2\" style={{ backgroundColor: '#f8f9fa' }}>\n                        <img\n                          src={imagePreview}\n                          alt=\"Preview\"\n                          style={{ \n                            maxWidth: '100%', \n                            maxHeight: '200px', \n                            objectFit: 'contain',\n                            display: 'block',\n                            margin: '0 auto'\n                          }}\n                          onError={(e) => {\n                            console.error('Preview image load error:', imagePreview?.substring(0, 50));\n                            e.target.style.display = 'none';\n                          }}\n                          onLoad={() => {\n                            console.log('Preview image loaded successfully');\n                          }}\n                        />\n                      </div>\n                      {imageFile && (\n                        <small className=\"text-muted d-block mt-1\">\n                          ไฟล์: {imageFile.name} ({(imageFile.size / 1024).toFixed(2)} KB)\n                        </small>\n                      )}\n                    </div>\n                  )}\n                </Form.Group>\n\n                <Form.Group className=\"mb-3\">\n                  <Form.Label>URL รูปภาพหลัก (หรือกรอกชื่อไฟล์หลังจากอัปโหลด)</Form.Label>\n                  <Form.Control\n                    type=\"text\"\n                    value={formData.images?.[0] || ''}\n                    onChange={(e) => {\n                      const value = e.target.value;\n                      handleImageFieldChange(0, value);\n                      // อัปเดต preview ทันทีเมื่อไม่มีไฟล์ที่อัปโหลด\n                      // ถ้ามีไฟล์ที่อัปโหลดอยู่แล้ว อย่าเปลี่ยน preview (ใช้ preview จาก FileReader)\n                      if (!imageFile) {\n                        if (value.trim()) {\n                          const previewUrl = resolveImagePreview(value);\n                          setImagePreview(previewUrl);\n                        } else {\n                          setImagePreview(null);\n                        }\n                      }\n                    }}\n                    placeholder=\"เช่น /images/โซฟา/product1.jpg หรือ https://example.com/product1.jpg หรือชื่อไฟล์หลังจากอัปโหลด\"\n                  />\n                  {formData.images?.[0] && !imageFile && (\n                    <div className=\"mt-2\">\n                      <small className=\"text-muted d-block mb-1\">Preview:</small>\n                      <div className=\"border rounded p-2\" style={{ backgroundColor: '#f8f9fa' }}>\n                        <img\n                          src={resolveImagePreview(formData.images[0])}\n                          alt=\"Image Preview\"\n                          style={{ \n                            maxWidth: '100%', \n                            maxHeight: '150px', \n                            objectFit: 'contain',\n                            display: 'block',\n                            margin: '0 auto'\n                          }}\n                          onError={(e) => {\n                            console.error('Image preview load error:', resolveImagePreview(formData.images[0]));\n                            e.target.style.display = 'none';\n                          }}\n                          onLoad={() => {\n                            console.log('Image preview loaded:', resolveImagePreview(formData.images[0]));\n                          }}\n                        />\n                      </div>\n                    </div>\n                  )}\n                </Form.Group>\n\n                <Row>\n                  {[1, 2, 3].map((idx) => (\n                    <Col md={4} key={`extra-image-${idx}`}>\n                      <Form.Group className=\"mb-3\">\n                        <Form.Label>รูปภาพเพิ่มเติม {idx}</Form.Label>\n                        <Form.Control\n                          type=\"text\"\n                          value={formData.images?.[idx] || ''}\n                          onChange={(e) => handleImageFieldChange(idx, e.target.value)}\n                          placeholder=\"เช่น product1-alt.png\"\n                        />\n                      </Form.Group>\n                    </Col>\n                  ))}\n                </Row>\n\n                <div className=\"admin-products-drawer__footer\">\n                  <Button\n                    variant=\"secondary\"\n                    onClick={() => setIsDrawerOpen(false)}\n                    className=\"me-2\"\n                  >\n                    ยกเลิก\n                  </Button>\n                  <Button variant=\"primary\" type=\"submit\" disabled={isLoading}>\n                    {isLoading ? 'กำลังบันทึก...' : 'บันทึก'}\n                  </Button>\n                </div>\n              </Form>\n            </div>\n          </div>\n        </div>\n\n      </Container>\n    </div>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}