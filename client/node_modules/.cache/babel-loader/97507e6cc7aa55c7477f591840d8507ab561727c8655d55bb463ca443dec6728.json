{"ast":null,"code":"var _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\Website_Sangswang\\\\client\\\\src\\\\pages\\\\Cards.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Badge from 'react-bootstrap/Badge';\nimport Table from 'react-bootstrap/Table';\nimport Form from 'react-bootstrap/Form';\nimport Alert from 'react-bootstrap/Alert';\nimport Spinner from 'react-bootstrap/Spinner';\nimport Image from 'react-bootstrap/Image';\nimport axios from 'axios';\nimport './Cards.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ORDER_STATUS_MAP = {\n  pending: {\n    label: 'รออนุมัติ',\n    variant: 'warning'\n  },\n  awaiting_payment: {\n    label: 'รอชำระเงิน',\n    variant: 'info'\n  },\n  approved: {\n    label: 'อนุมัติแล้ว',\n    variant: 'success'\n  },\n  waiting_for_delivery: {\n    label: 'รอจัดส่ง',\n    variant: 'primary'\n  },\n  completed: {\n    label: 'ส่งมอบสำเร็จ',\n    variant: 'success'\n  },\n  cancelled: {\n    label: 'ยกเลิกโดยผู้ดูแล',\n    variant: 'danger'\n  },\n  cancelled_by_customer: {\n    label: 'ยกเลิก',\n    variant: 'danger'\n  }\n};\nconst formatCurrency = value => {\n  if (value == null) return '-';\n  return `฿${parseFloat(value).toLocaleString('th-TH')}`;\n};\nconst formatDate = value => {\n  if (!value) return '-';\n  const date = new Date(value);\n  if (Number.isNaN(date.getTime())) return '-';\n  return date.toLocaleDateString('th-TH');\n};\nconst formatShippingAddress = value => {\n  if (!value) {\n    return '';\n  }\n  if (typeof value === 'string') {\n    const trimmed = value.trim();\n    if (!trimmed) {\n      return '';\n    }\n    if (trimmed.startsWith('{')) {\n      try {\n        return formatShippingAddress(JSON.parse(trimmed));\n      } catch (error) {\n        console.warn('Failed to parse shipping address JSON:', trimmed, error);\n        return trimmed;\n      }\n    }\n    return trimmed;\n  }\n  if (typeof value === 'object') {\n    const recipientName = [value.recipientName, value.recipientSurname].filter(Boolean).join(' ').trim();\n    const lines = [];\n    if (recipientName) {\n      lines.push(recipientName);\n    }\n    if (value.phone) {\n      lines.push(`โทร: ${value.phone}`);\n    }\n    if (value.address) {\n      lines.push(value.address);\n    }\n    return lines.join('\\n');\n  }\n  return '';\n};\n\n/**\n * คำนวณจำนวนเงินผ่อนชำระแต่ละงวดให้ถูกต้องตามหลักบัญชี\n */\nconst calculateInstallmentAmounts = (totalAmount, periods) => {\n  const total = Number(totalAmount);\n  const numPeriods = Number(periods);\n  if (!Number.isFinite(total) || total <= 0 || !Number.isFinite(numPeriods) || numPeriods <= 0) {\n    return [];\n  }\n  if (numPeriods === 1) {\n    return [total];\n  }\n  const averagePerMonth = total / numPeriods;\n  const regularAmount = Math.ceil(averagePerMonth / 10) * 10;\n  const amounts = [];\n  for (let i = 1; i < numPeriods; i++) {\n    amounts.push(regularAmount);\n  }\n  const regularTotal = regularAmount * (numPeriods - 1);\n  const lastAmount = total - regularTotal;\n  amounts.push(lastAmount);\n  return amounts;\n};\nconst isInstallmentOrder = order => {\n  if (!order) return false;\n  const periods = Number(order.installment_periods) || 0;\n  // คำนวณจำนวนเงินงวดแรกให้ถูกต้องตามหลักบัญชี\n  const installmentAmounts = isInstallmentOrder(order) ? calculateInstallmentAmounts(Number(order.total_amount) || 0, Number(order.installment_periods) || 0) : [];\n  const monthlyPayment = installmentAmounts.length > 0 ? installmentAmounts[0] : Number(order.monthly_payment) || 0;\n  const method = order.payment_method ? String(order.payment_method).toLowerCase() : '';\n  if (method.includes('installment')) {\n    return true;\n  }\n  if (method.includes('cash')) {\n    return false;\n  }\n  if (periods > 1) {\n    return true;\n  }\n  return periods >= 1 && monthlyPayment > 0;\n};\nexport default function Cards() {\n  _s();\n  var _orderDetail$installm;\n  const [orders, setOrders] = useState([]);\n  const [selectedOrderId, setSelectedOrderId] = useState(null);\n  const [orderDetail, setOrderDetail] = useState(null);\n  const [isOrdersLoading, setIsOrdersLoading] = useState(true);\n  const [isDetailLoading, setIsDetailLoading] = useState(false);\n  const [ordersError, setOrdersError] = useState('');\n  const [detailError, setDetailError] = useState('');\n  useEffect(() => {\n    const fetchOrders = async () => {\n      setIsOrdersLoading(true);\n      setOrdersError('');\n      try {\n        const response = await axios.get('/api/customer/orders');\n        const rawData = Array.isArray(response.data) ? response.data : [];\n        const filtered = rawData.filter(order => order.order_status !== 'cancelled_by_customer' && order.order_status !== 'cancelled' && isInstallmentOrder(order));\n        if (filtered.length === 0) {\n          setOrders([]);\n          setSelectedOrderId(null);\n          setOrdersError(rawData.length > 0 ? 'ยังไม่มีคำสั่งซื้อที่อยู่ในแผนผ่อนชำระ (รายการที่ยกเลิกจะไม่แสดงในหน้านี้)' : 'ยังไม่มีคำสั่งซื้อ');\n          return;\n        }\n        setOrders(filtered);\n        setOrdersError('');\n        setSelectedOrderId(filtered[0].order_id);\n      } catch (error) {\n        var _error$response, _error$response$data;\n        console.error('Error fetching customer orders:', error);\n        setOrdersError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'ไม่สามารถโหลดข้อมูลคำสั่งซื้อได้');\n      } finally {\n        setIsOrdersLoading(false);\n      }\n    };\n    fetchOrders();\n  }, []);\n  useEffect(() => {\n    if (!selectedOrderId) {\n      setOrderDetail(null);\n      return;\n    }\n    const fetchOrderDetail = async () => {\n      setIsDetailLoading(true);\n      setDetailError('');\n      try {\n        const response = await axios.get(`/api/orders/${selectedOrderId}`);\n        setOrderDetail(response.data);\n      } catch (error) {\n        var _error$response2, _error$response2$data;\n        console.error('Error fetching order detail:', error);\n        setDetailError(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || 'ไม่สามารถโหลดรายละเอียดคำสั่งซื้อได้');\n        setOrderDetail(null);\n      } finally {\n        setIsDetailLoading(false);\n      }\n    };\n    fetchOrderDetail();\n  }, [selectedOrderId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cards-page\",\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"cards-contract__header-only\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"cards-contract__eyebrow\",\n            children: \"\\u0E41\\u0E1C\\u0E19\\u0E01\\u0E32\\u0E23\\u0E1C\\u0E48\\u0E2D\\u0E19\\u0E0A\\u0E33\\u0E23\\u0E30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30\\u0E01\\u0E32\\u0E23\\u0E1C\\u0E48\\u0E2D\\u0E19\\u0E0A\\u0E33\\u0E23\\u0E30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-muted\",\n            children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E04\\u0E33\\u0E2A\\u0E31\\u0E48\\u0E07\\u0E0B\\u0E37\\u0E49\\u0E2D\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E14\\u0E39\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\\u0E01\\u0E32\\u0E23\\u0E1C\\u0E48\\u0E2D\\u0E19\\u0E0A\\u0E33\\u0E23\\u0E30\\u0E41\\u0E15\\u0E48\\u0E25\\u0E30\\u0E07\\u0E27\\u0E14\\u0E44\\u0E14\\u0E49\\u0E17\\u0E35\\u0E48\\u0E19\\u0E35\\u0E48\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cards-contract__selector-shell\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Select, {\n            value: selectedOrderId !== null && selectedOrderId !== void 0 ? selectedOrderId : '',\n            onChange: event => setSelectedOrderId(event.target.value || null),\n            disabled: isOrdersLoading || orders.length === 0,\n            className: \"cards-contract__selector\",\n            children: [orders.length === 0 && /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E04\\u0E33\\u0E2A\\u0E31\\u0E48\\u0E07\\u0E0B\\u0E37\\u0E49\\u0E2D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 39\n            }, this), orders.map(order => {\n              var _order$items;\n              const primaryItem = (_order$items = order.items) === null || _order$items === void 0 ? void 0 : _order$items[0];\n              return /*#__PURE__*/_jsxDEV(\"option\", {\n                value: order.order_id,\n                children: [\"#\", order.order_id, \" \\u2022 \", (primaryItem === null || primaryItem === void 0 ? void 0 : primaryItem.product_name) || 'ไม่ระบุสินค้า']\n              }, order.order_id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 19\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cards-contract__selector-display\",\n            children: isOrdersLoading ? /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 17\n            }, this) : selectedOrderId ? (_selectedOrder$items => {\n              const selectedOrder = orders.find(order => order.order_id === Number(selectedOrderId));\n              const primaryItem = selectedOrder === null || selectedOrder === void 0 ? void 0 : (_selectedOrder$items = selectedOrder.items) === null || _selectedOrder$items === void 0 ? void 0 : _selectedOrder$items[0];\n              const statusKey = orderDetail === null || orderDetail === void 0 ? void 0 : orderDetail.order_status;\n              const statusConfig = ORDER_STATUS_MAP[statusKey] || {\n                label: statusKey || '-',\n                variant: 'secondary'\n              };\n              const isCancelled = statusKey === 'cancelled' || statusKey === 'cancelled_by_customer';\n              const isPending = statusKey === 'pending';\n              const isAwaitingPayment = statusKey === 'awaiting_payment';\n              const badgeClasses = ['cards-status-badge', isCancelled ? 'cards-status-badge--cancelled' : '', isPending ? 'cards-status-badge--pending' : '', isAwaitingPayment ? 'cards-status-badge--awaiting' : ''].filter(Boolean).join(' ');\n              return /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"selector-product\",\n                  children: [/*#__PURE__*/_jsxDEV(Image, {\n                    src: (primaryItem === null || primaryItem === void 0 ? void 0 : primaryItem.product_image) || 'https://via.placeholder.com/80',\n                    alt: (primaryItem === null || primaryItem === void 0 ? void 0 : primaryItem.product_name) || 'สินค้า',\n                    rounded: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: (primaryItem === null || primaryItem === void 0 ? void 0 : primaryItem.product_name) || `คำสั่งซื้อ #${(selectedOrder === null || selectedOrder === void 0 ? void 0 : selectedOrder.order_id) || '-'}`\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 269,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [formatDate(selectedOrder === null || selectedOrder === void 0 ? void 0 : selectedOrder.order_date), \" \\u2022 \", formatCurrency(selectedOrder === null || selectedOrder === void 0 ? void 0 : selectedOrder.total_amount)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 270,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 268,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                  bg: statusConfig.variant,\n                  className: badgeClasses,\n                  children: statusConfig.label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true);\n            })() : /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E04\\u0E33\\u0E2A\\u0E31\\u0E48\\u0E07\\u0E0B\\u0E37\\u0E49\\u0E2D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), ordersError && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        className: \"cards-contract__alert\",\n        children: ordersError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 11\n      }, this), orderDetail && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cards-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cards-summary__item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"\\u0E22\\u0E2D\\u0E14\\u0E23\\u0E27\\u0E21\\u0E2A\\u0E31\\u0E0D\\u0E0D\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: formatCurrency(orderDetail.total_amount)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cards-summary__item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E07\\u0E27\\u0E14\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: orderDetail.installment_periods || '-'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cards-summary__item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"\\u0E07\\u0E27\\u0E14\\u0E22\\u0E2D\\u0E14\\u0E1B\\u0E31\\u0E08\\u0E08\\u0E38\\u0E1A\\u0E31\\u0E19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: isInstallmentOrder(orderDetail) ? (() => {\n              const amounts = calculateInstallmentAmounts(Number(orderDetail.total_amount) || 0, Number(orderDetail.installment_periods) || 0);\n              return formatCurrency(amounts.length > 0 ? amounts[0] : orderDetail.monthly_payment || 0);\n            })() : formatCurrency(orderDetail.monthly_payment || 0)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cards-summary__item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"\\u0E17\\u0E35\\u0E48\\u0E2D\\u0E22\\u0E39\\u0E48\\u0E08\\u0E31\\u0E14\\u0E2A\\u0E48\\u0E07\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"cards-summary__address\",\n            children: formatShippingAddress(orderDetail.shipping_address) || 'ไม่ได้ระบุที่อยู่จัดส่ง'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 11\n      }, this), detailError && !isDetailLoading && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        className: \"cards-contract__alert\",\n        children: detailError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 11\n      }, this), isDetailLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cards-contract__loading\",\n        children: [/*#__PURE__*/_jsxDEV(Spinner, {\n          animation: \"border\",\n          role: \"status\",\n          size: \"sm\",\n          className: \"me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E15\\u0E32\\u0E23\\u0E32\\u0E07\\u0E1C\\u0E48\\u0E2D\\u0E19\\u0E0A\\u0E33\\u0E23\\u0E30...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: orderDetail !== null && orderDetail !== void 0 && (_orderDetail$installm = orderDetail.installments) !== null && _orderDetail$installm !== void 0 && _orderDetail$installm.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cards-contract__table-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cards-contract__summary\",\n            children: [/*#__PURE__*/_jsxDEV(Badge, {\n              bg: \"light\",\n              text: \"dark\",\n              children: [\"\\u0E40\\u0E2B\\u0E25\\u0E37\\u0E2D\\u0E2D\\u0E35\\u0E01 \", orderDetail.installments.filter(item => item.payment_status !== 'paid').length, \" \\u0E07\\u0E27\\u0E14\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 19\n            }, this), ((_ORDER_STATUS_MAP$ord, _ORDER_STATUS_MAP$ord2) => {\n              const summaryStatus = orderDetail.order_status;\n              const summaryClasses = ['cards-status-badge'];\n              if (summaryStatus === 'cancelled' || summaryStatus === 'cancelled_by_customer') {\n                summaryClasses.push('cards-status-badge--cancelled');\n              }\n              if (summaryStatus === 'pending') {\n                summaryClasses.push('cards-status-badge--pending');\n              }\n              if (summaryStatus === 'awaiting_payment') {\n                summaryClasses.push('cards-status-badge--awaiting');\n              }\n              return /*#__PURE__*/_jsxDEV(Badge, {\n                bg: ((_ORDER_STATUS_MAP$ord = ORDER_STATUS_MAP[orderDetail.order_status]) === null || _ORDER_STATUS_MAP$ord === void 0 ? void 0 : _ORDER_STATUS_MAP$ord.variant) || 'secondary',\n                className: summaryClasses.join(' '),\n                children: ((_ORDER_STATUS_MAP$ord2 = ORDER_STATUS_MAP[orderDetail.order_status]) === null || _ORDER_STATUS_MAP$ord2 === void 0 ? void 0 : _ORDER_STATUS_MAP$ord2.label) || orderDetail.order_status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 23\n              }, this);\n            })()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Table, {\n            responsive: true,\n            hover: true,\n            className: \"cards-contract__table\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u0E07\\u0E27\\u0E14\\u0E17\\u0E35\\u0E48\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u0E22\\u0E2D\\u0E14\\u0E0A\\u0E33\\u0E23\\u0E30\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 375,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\\u0E0A\\u0E33\\u0E23\\u0E30\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E0A\\u0E33\\u0E23\\u0E30\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: orderDetail.installments.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.installment_number\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 384,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: formatCurrency(item.installment_amount)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: formatDate(item.payment_due_date)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: formatDate(item.payment_date)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(Badge, {\n                    bg: item.payment_status === 'paid' ? 'success' : 'secondary',\n                    children: item.payment_status === 'paid' ? 'ชำระแล้ว' : 'รอชำระ'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 389,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 25\n                }, this)]\n              }, item.installment_id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 15\n        }, this) : null\n      }, void 0, false)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 209,\n    columnNumber: 5\n  }, this);\n}\n_s(Cards, \"6x7/lVwrpbJXfpl9CMebbeFbEdE=\");\n_c = Cards;\nvar _c;\n$RefreshReg$(_c, \"Cards\");","map":{"version":3,"names":["React","useEffect","useState","Container","Badge","Table","Form","Alert","Spinner","Image","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","ORDER_STATUS_MAP","pending","label","variant","awaiting_payment","approved","waiting_for_delivery","completed","cancelled","cancelled_by_customer","formatCurrency","value","parseFloat","toLocaleString","formatDate","date","Date","Number","isNaN","getTime","toLocaleDateString","formatShippingAddress","trimmed","trim","startsWith","JSON","parse","error","console","warn","recipientName","recipientSurname","filter","Boolean","join","lines","push","phone","address","calculateInstallmentAmounts","totalAmount","periods","total","numPeriods","isFinite","averagePerMonth","regularAmount","Math","ceil","amounts","i","regularTotal","lastAmount","isInstallmentOrder","order","installment_periods","installmentAmounts","total_amount","monthlyPayment","length","monthly_payment","method","payment_method","String","toLowerCase","includes","Cards","_s","_orderDetail$installm","orders","setOrders","selectedOrderId","setSelectedOrderId","orderDetail","setOrderDetail","isOrdersLoading","setIsOrdersLoading","isDetailLoading","setIsDetailLoading","ordersError","setOrdersError","detailError","setDetailError","fetchOrders","response","get","rawData","Array","isArray","data","filtered","order_status","order_id","_error$response","_error$response$data","fetchOrderDetail","_error$response2","_error$response2$data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","Select","onChange","event","target","disabled","map","_order$items","primaryItem","items","product_name","_selectedOrder$items","selectedOrder","find","statusKey","statusConfig","isCancelled","isPending","isAwaitingPayment","badgeClasses","src","product_image","alt","rounded","order_date","bg","shipping_address","animation","role","size","installments","text","item","payment_status","_ORDER_STATUS_MAP$ord","_ORDER_STATUS_MAP$ord2","summaryStatus","summaryClasses","responsive","hover","installment_number","installment_amount","payment_due_date","payment_date","installment_id","_c","$RefreshReg$"],"sources":["D:/xampp/htdocs/Website_Sangswang/client/src/pages/Cards.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Badge from 'react-bootstrap/Badge';\nimport Table from 'react-bootstrap/Table';\nimport Form from 'react-bootstrap/Form';\nimport Alert from 'react-bootstrap/Alert';\nimport Spinner from 'react-bootstrap/Spinner';\nimport Image from 'react-bootstrap/Image';\nimport axios from 'axios';\nimport './Cards.css';\n\nconst ORDER_STATUS_MAP = {\n  pending: { label: 'รออนุมัติ', variant: 'warning' },\n  awaiting_payment: { label: 'รอชำระเงิน', variant: 'info' },\n  approved: { label: 'อนุมัติแล้ว', variant: 'success' },\n  waiting_for_delivery: { label: 'รอจัดส่ง', variant: 'primary' },\n  completed: { label: 'ส่งมอบสำเร็จ', variant: 'success' },\n  cancelled: { label: 'ยกเลิกโดยผู้ดูแล', variant: 'danger' },\n  cancelled_by_customer: { label: 'ยกเลิก', variant: 'danger' }\n};\n\nconst formatCurrency = (value) => {\n  if (value == null) return '-';\n  return `฿${parseFloat(value).toLocaleString('th-TH')}`;\n};\n\nconst formatDate = (value) => {\n  if (!value) return '-';\n  const date = new Date(value);\n  if (Number.isNaN(date.getTime())) return '-';\n  return date.toLocaleDateString('th-TH');\n};\n\nconst formatShippingAddress = (value) => {\n  if (!value) {\n    return '';\n  }\n\n  if (typeof value === 'string') {\n    const trimmed = value.trim();\n    if (!trimmed) {\n      return '';\n    }\n    if (trimmed.startsWith('{')) {\n      try {\n        return formatShippingAddress(JSON.parse(trimmed));\n      } catch (error) {\n        console.warn('Failed to parse shipping address JSON:', trimmed, error);\n        return trimmed;\n      }\n    }\n    return trimmed;\n  }\n\n  if (typeof value === 'object') {\n    const recipientName = [value.recipientName, value.recipientSurname]\n      .filter(Boolean)\n      .join(' ')\n      .trim();\n    const lines = [];\n    if (recipientName) {\n      lines.push(recipientName);\n    }\n    if (value.phone) {\n      lines.push(`โทร: ${value.phone}`);\n    }\n    if (value.address) {\n      lines.push(value.address);\n    }\n    return lines.join('\\n');\n  }\n\n  return '';\n};\n\n/**\n * คำนวณจำนวนเงินผ่อนชำระแต่ละงวดให้ถูกต้องตามหลักบัญชี\n */\nconst calculateInstallmentAmounts = (totalAmount, periods) => {\n  const total = Number(totalAmount);\n  const numPeriods = Number(periods);\n  \n  if (!Number.isFinite(total) || total <= 0 || !Number.isFinite(numPeriods) || numPeriods <= 0) {\n    return [];\n  }\n  \n  if (numPeriods === 1) {\n    return [total];\n  }\n  \n  const averagePerMonth = total / numPeriods;\n  const regularAmount = Math.ceil(averagePerMonth / 10) * 10;\n  \n  const amounts = [];\n  for (let i = 1; i < numPeriods; i++) {\n    amounts.push(regularAmount);\n  }\n  \n  const regularTotal = regularAmount * (numPeriods - 1);\n  const lastAmount = total - regularTotal;\n  amounts.push(lastAmount);\n  \n  return amounts;\n};\n\nconst isInstallmentOrder = (order) => {\n  if (!order) return false;\n  const periods = Number(order.installment_periods) || 0;\n  // คำนวณจำนวนเงินงวดแรกให้ถูกต้องตามหลักบัญชี\n  const installmentAmounts = isInstallmentOrder(order)\n    ? calculateInstallmentAmounts(\n        Number(order.total_amount) || 0,\n        Number(order.installment_periods) || 0\n      )\n    : [];\n  const monthlyPayment = installmentAmounts.length > 0 \n    ? installmentAmounts[0] \n    : Number(order.monthly_payment) || 0;\n  const method = order.payment_method ? String(order.payment_method).toLowerCase() : '';\n\n  if (method.includes('installment')) {\n    return true;\n  }\n\n  if (method.includes('cash')) {\n    return false;\n  }\n\n  if (periods > 1) {\n    return true;\n  }\n\n  return periods >= 1 && monthlyPayment > 0;\n};\n\nexport default function Cards() {\n  const [orders, setOrders] = useState([]);\n  const [selectedOrderId, setSelectedOrderId] = useState(null);\n  const [orderDetail, setOrderDetail] = useState(null);\n  const [isOrdersLoading, setIsOrdersLoading] = useState(true);\n  const [isDetailLoading, setIsDetailLoading] = useState(false);\n  const [ordersError, setOrdersError] = useState('');\n  const [detailError, setDetailError] = useState('');\n\n  useEffect(() => {\n    const fetchOrders = async () => {\n      setIsOrdersLoading(true);\n      setOrdersError('');\n      try {\n        const response = await axios.get('/api/customer/orders');\n        const rawData = Array.isArray(response.data) ? response.data : [];\n        const filtered = rawData.filter(\n          (order) =>\n            order.order_status !== 'cancelled_by_customer' &&\n            order.order_status !== 'cancelled' &&\n            isInstallmentOrder(order)\n        );\n\n        if (filtered.length === 0) {\n          setOrders([]);\n          setSelectedOrderId(null);\n          setOrdersError(\n            rawData.length > 0\n              ? 'ยังไม่มีคำสั่งซื้อที่อยู่ในแผนผ่อนชำระ (รายการที่ยกเลิกจะไม่แสดงในหน้านี้)'\n              : 'ยังไม่มีคำสั่งซื้อ'\n          );\n          return;\n        }\n\n        setOrders(filtered);\n        setOrdersError('');\n        setSelectedOrderId(filtered[0].order_id);\n      } catch (error) {\n        console.error('Error fetching customer orders:', error);\n        setOrdersError(error.response?.data?.error || 'ไม่สามารถโหลดข้อมูลคำสั่งซื้อได้');\n      } finally {\n        setIsOrdersLoading(false);\n      }\n    };\n\n    fetchOrders();\n  }, []);\n\n  useEffect(() => {\n    if (!selectedOrderId) {\n      setOrderDetail(null);\n      return;\n    }\n\n    const fetchOrderDetail = async () => {\n      setIsDetailLoading(true);\n      setDetailError('');\n      try {\n        const response = await axios.get(`/api/orders/${selectedOrderId}`);\n        setOrderDetail(response.data);\n      } catch (error) {\n        console.error('Error fetching order detail:', error);\n        setDetailError(error.response?.data?.error || 'ไม่สามารถโหลดรายละเอียดคำสั่งซื้อได้');\n        setOrderDetail(null);\n      } finally {\n        setIsDetailLoading(false);\n      }\n    };\n\n    fetchOrderDetail();\n  }, [selectedOrderId]);\n\n  return (\n    <div className=\"cards-page\">\n      <Container>\n        <header className=\"cards-contract__header-only\">\n          <div>\n            <span className=\"cards-contract__eyebrow\">แผนการผ่อนชำระ</span>\n            <h1>สถานะการผ่อนชำระ</h1>\n            <p className=\"text-muted\">\n              เลือกคำสั่งซื้อเพื่อดูรายละเอียดการผ่อนชำระแต่ละงวดได้ที่นี่\n            </p>\n          </div>\n          <div className=\"cards-contract__selector-shell\">\n            <Form.Select\n              value={selectedOrderId ?? ''}\n              onChange={(event) => setSelectedOrderId(event.target.value || null)}\n              disabled={isOrdersLoading || orders.length === 0}\n              className=\"cards-contract__selector\"\n            >\n              {orders.length === 0 && <option value=\"\">ยังไม่มีคำสั่งซื้อ</option>}\n              {orders.map((order) => {\n                const primaryItem = order.items?.[0];\n                return (\n                  <option key={order.order_id} value={order.order_id}>\n                    #{order.order_id} • {primaryItem?.product_name || 'ไม่ระบุสินค้า'}\n                  </option>\n                );\n              })}\n            </Form.Select>\n            <div className=\"cards-contract__selector-display\">\n              {isOrdersLoading ? (\n                <span>กำลังโหลด...</span>\n              ) : selectedOrderId ? (\n                (() => {\n                  const selectedOrder = orders.find((order) => order.order_id === Number(selectedOrderId));\n                  const primaryItem = selectedOrder?.items?.[0];\n                  const statusKey = orderDetail?.order_status;\n                  const statusConfig = ORDER_STATUS_MAP[statusKey] || {\n                    label: statusKey || '-',\n                    variant: 'secondary'\n                  };\n                  const isCancelled =\n                    statusKey === 'cancelled' || statusKey === 'cancelled_by_customer';\n                  const isPending = statusKey === 'pending';\n                  const isAwaitingPayment = statusKey === 'awaiting_payment';\n                  const badgeClasses = [\n                    'cards-status-badge',\n                    isCancelled ? 'cards-status-badge--cancelled' : '',\n                    isPending ? 'cards-status-badge--pending' : '',\n                    isAwaitingPayment ? 'cards-status-badge--awaiting' : ''\n                  ]\n                    .filter(Boolean)\n                    .join(' ');\n                  return (\n                    <>\n                      <div className=\"selector-product\">\n                        <Image\n                          src={primaryItem?.product_image || 'https://via.placeholder.com/80'}\n                          alt={primaryItem?.product_name || 'สินค้า'}\n                          rounded\n                        />\n                        <div>\n                          <strong>{primaryItem?.product_name || `คำสั่งซื้อ #${selectedOrder?.order_id || '-'}`}</strong>\n                          <span>\n                            {formatDate(selectedOrder?.order_date)} • {formatCurrency(selectedOrder?.total_amount)}\n                          </span>\n                        </div>\n                      </div>\n                      <Badge\n                        bg={statusConfig.variant}\n                        className={badgeClasses}\n                      >\n                        {statusConfig.label}\n                      </Badge>\n                    </>\n                  );\n                })()\n              ) : (\n                <span>เลือกคำสั่งซื้อ</span>\n              )}\n            </div>\n          </div>\n        </header>\n\n        {ordersError && (\n          <Alert variant=\"danger\" className=\"cards-contract__alert\">\n            {ordersError}\n          </Alert>\n        )}\n\n        {orderDetail && (\n          <div className=\"cards-summary\">\n            <div className=\"cards-summary__item\">\n              <span className=\"label\">ยอดรวมสัญญา</span>\n              <strong>{formatCurrency(orderDetail.total_amount)}</strong>\n            </div>\n            <div className=\"cards-summary__item\">\n              <span className=\"label\">จำนวนงวดทั้งหมด</span>\n              <strong>{orderDetail.installment_periods || '-'}</strong>\n            </div>\n            <div className=\"cards-summary__item\">\n              <span className=\"label\">งวดยอดปัจจุบัน</span>\n              <strong>\n                {isInstallmentOrder(orderDetail)\n                  ? (() => {\n                      const amounts = calculateInstallmentAmounts(\n                        Number(orderDetail.total_amount) || 0,\n                        Number(orderDetail.installment_periods) || 0\n                      );\n                      return formatCurrency(amounts.length > 0 ? amounts[0] : orderDetail.monthly_payment || 0);\n                    })()\n                  : formatCurrency(orderDetail.monthly_payment || 0)}\n              </strong>\n            </div>\n            <div className=\"cards-summary__item\">\n              <span className=\"label\">ที่อยู่จัดส่ง</span>\n              <p className=\"cards-summary__address\">\n                {formatShippingAddress(orderDetail.shipping_address) || 'ไม่ได้ระบุที่อยู่จัดส่ง'}\n              </p>\n            </div>\n          </div>\n        )}\n\n        {detailError && !isDetailLoading && (\n          <Alert variant=\"danger\" className=\"cards-contract__alert\">\n            {detailError}\n          </Alert>\n        )}\n\n        {isDetailLoading ? (\n          <div className=\"cards-contract__loading\">\n            <Spinner animation=\"border\" role=\"status\" size=\"sm\" className=\"me-2\" />\n            <span>กำลังโหลดตารางผ่อนชำระ...</span>\n          </div>\n        ) : (\n          <>\n            {orderDetail?.installments?.length ? (\n              <div className=\"cards-contract__table-wrapper\">\n                <div className=\"cards-contract__summary\">\n                  <Badge bg=\"light\" text=\"dark\">\n                    เหลืออีก {orderDetail.installments.filter((item) => item.payment_status !== 'paid').length} งวด\n                  </Badge>\n                  {(() => {\n                    const summaryStatus = orderDetail.order_status;\n                    const summaryClasses = ['cards-status-badge'];\n                    if (summaryStatus === 'cancelled' || summaryStatus === 'cancelled_by_customer') {\n                      summaryClasses.push('cards-status-badge--cancelled');\n                    }\n                    if (summaryStatus === 'pending') {\n                      summaryClasses.push('cards-status-badge--pending');\n                    }\n                    if (summaryStatus === 'awaiting_payment') {\n                      summaryClasses.push('cards-status-badge--awaiting');\n                    }\n                    return (\n                      <Badge\n                        bg={ORDER_STATUS_MAP[orderDetail.order_status]?.variant || 'secondary'}\n                        className={summaryClasses.join(' ')}\n                      >\n                        {ORDER_STATUS_MAP[orderDetail.order_status]?.label || orderDetail.order_status}\n                      </Badge>\n                    );\n                  })()}\n                </div>\n                <Table responsive hover className=\"cards-contract__table\">\n                  <thead>\n                    <tr>\n                      <th>งวดที่</th>\n                      <th>ยอดชำระ</th>\n                      <th>กำหนดชำระ</th>\n                      <th>วันที่ชำระ</th>\n                      <th>สถานะ</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {orderDetail.installments.map((item) => (\n                      <tr key={item.installment_id}>\n                        <td>{item.installment_number}</td>\n                        <td>{formatCurrency(item.installment_amount)}</td>\n                        <td>{formatDate(item.payment_due_date)}</td>\n                        <td>{formatDate(item.payment_date)}</td>\n                        <td>\n                          <Badge bg={item.payment_status === 'paid' ? 'success' : 'secondary'}>\n                            {item.payment_status === 'paid' ? 'ชำระแล้ว' : 'รอชำระ'}\n                          </Badge>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </Table>\n              </div>\n            ) : null}\n          </>\n        )}\n      </Container>\n    </div>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}