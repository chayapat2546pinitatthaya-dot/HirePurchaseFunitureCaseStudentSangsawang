{"ast":null,"code":"var _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\Website_Sangswang\\\\client\\\\src\\\\pages\\\\admin\\\\AdminPaymentConfirmation.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container';\nimport Card from 'react-bootstrap/Card';\nimport Table from 'react-bootstrap/Table';\nimport Badge from 'react-bootstrap/Badge';\nimport Button from 'react-bootstrap/Button';\nimport Spinner from 'react-bootstrap/Spinner';\nimport Alert from 'react-bootstrap/Alert';\nimport axios from 'axios';\nimport AdminHeader from '../../components/AdminHeader';\nimport NotificationBell from '../../components/NotificationBell';\nimport './AdminDashboard.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst formatCurrency = value => {\n  const number = Number(value) || 0;\n  return `฿${number.toLocaleString('th-TH', {\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0\n  })}`;\n};\nconst formatDate = value => {\n  if (!value) {\n    return '-';\n  }\n  const date = new Date(value);\n  if (Number.isNaN(date.getTime())) {\n    return '-';\n  }\n  return date.toLocaleDateString('th-TH', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  });\n};\nconst getDaysUntilDue = dueDate => {\n  if (!dueDate) return null;\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n  const due = new Date(dueDate);\n  due.setHours(0, 0, 0, 0);\n  const diffTime = due - today;\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  return diffDays;\n};\nexport default function AdminPaymentConfirmation({\n  admin,\n  logout,\n  isSidebarCollapsed,\n  toggleSidebar,\n  adminNotifications,\n  markAdminOrdersSeen,\n  markAdminCustomersSeen\n}) {\n  _s();\n  const navigate = useNavigate();\n  const [installments, setInstallments] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [lastFetchedAt, setLastFetchedAt] = useState(null);\n  const [message, setMessage] = useState({\n    show: false,\n    text: '',\n    variant: ''\n  });\n  const [actionLoadingId, setActionLoadingId] = useState(null);\n  const toDateInput = date => date.toISOString().split('T')[0];\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n  const defaultEnd = new Date(today);\n  defaultEnd.setDate(defaultEnd.getDate() + 5);\n  const [startDate, setStartDate] = useState(toDateInput(today));\n  const [endDate, setEndDate] = useState(toDateInput(defaultEnd));\n  const fetchUpcomingPayments = useCallback(async () => {\n    setIsLoading(true);\n    try {\n      const response = await axios.get('/api/admin/payment-confirmations', {\n        params: {\n          start_date: startDate,\n          end_date: endDate\n        }\n      });\n      // ตรวจสอบว่า response.data เป็น array\n      const data = Array.isArray(response.data) ? response.data : [];\n      setInstallments(data);\n      setLastFetchedAt(new Date());\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Error fetching upcoming payments:', error);\n      setMessage({\n        show: true,\n        text: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'ไม่สามารถโหลดข้อมูลได้',\n        variant: 'danger'\n      });\n      // ตั้งค่าเป็น array ว่างเมื่อเกิด error\n      setInstallments([]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [startDate, endDate]);\n  useEffect(() => {\n    // ตรวจสอบว่ามี token ก่อนเรียก API\n    const adminToken = localStorage.getItem('admin_token');\n    if (!adminToken) {\n      setMessage({\n        show: true,\n        text: 'กรุณาเข้าสู่ระบบใหม่',\n        variant: 'danger'\n      });\n      setIsLoading(false);\n      return;\n    }\n\n    // ตรวจสอบ token expiration (ถ้าเป็น JWT)\n    try {\n      const tokenParts = adminToken.split('.');\n      if (tokenParts.length === 3) {\n        const payload = JSON.parse(atob(tokenParts[1]));\n        const expirationTime = payload.exp * 1000; // Convert to milliseconds\n        if (Date.now() >= expirationTime) {\n          setMessage({\n            show: true,\n            text: 'Session หมดอายุ กรุณาเข้าสู่ระบบใหม่',\n            variant: 'danger'\n          });\n          setIsLoading(false);\n          // ลบ token ที่หมดอายุ\n          localStorage.removeItem('admin_token');\n          localStorage.removeItem('admin_user');\n          return;\n        }\n      }\n    } catch (error) {\n      // ถ้า parse ไม่ได้ อาจไม่ใช่ JWT หรือ format ผิด\n      console.warn('Token validation error:', error);\n    }\n\n    // ตั้งค่า Authorization header ก่อนเรียก API\n    axios.defaults.headers.common['Authorization'] = `Bearer ${adminToken}`;\n    fetchUpcomingPayments();\n\n    // Auto-refresh every 30 seconds\n    const interval = setInterval(() => {\n      fetchUpcomingPayments();\n    }, 30000);\n    return () => clearInterval(interval);\n  }, [fetchUpcomingPayments]);\n  const handleMarkPaid = async (orderId, installmentId) => {\n    if (!window.confirm('ยืนยันการบันทึกว่าชำระเงินแล้ว?')) {\n      return;\n    }\n    setActionLoadingId(installmentId);\n    try {\n      await axios.put(`/api/orders/${orderId}/installments/${installmentId}/mark-paid`);\n      setMessage({\n        show: true,\n        text: 'บันทึกสถานะการชำระเงินเรียบร้อยแล้ว',\n        variant: 'success'\n      });\n\n      // รีเฟรชข้อมูล\n      await fetchUpcomingPayments();\n      setTimeout(() => setMessage({\n        show: false\n      }), 3000);\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error('Error marking installment paid:', error);\n      setMessage({\n        show: true,\n        text: ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || 'ไม่สามารถบันทึกสถานะการชำระเงินได้',\n        variant: 'danger'\n      });\n      setTimeout(() => setMessage({\n        show: false\n      }), 5000); // Error message แสดงนานกว่า\n    } finally {\n      setActionLoadingId(null);\n    }\n  };\n  const handleViewOrder = orderId => {\n    navigate(`/admin/orders`);\n    // เปิด order detail ในหน้า orders\n    setTimeout(() => {\n      const event = new CustomEvent('admin-view-order', {\n        detail: {\n          orderId\n        }\n      });\n      window.dispatchEvent(event);\n    }, 100);\n  };\n  const getUrgencyBadge = daysUntilDue => {\n    if (daysUntilDue === null) return null;\n    if (daysUntilDue < 0) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"dashboard-status-badge\",\n        style: {\n          backgroundColor: '#dc3545'\n        },\n        children: \"\\u0E40\\u0E25\\u0E22\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 14\n      }, this);\n    } else if (daysUntilDue === 0) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"dashboard-status-badge\",\n        style: {\n          backgroundColor: '#ffc107'\n        },\n        children: \"\\u0E27\\u0E31\\u0E19\\u0E19\\u0E35\\u0E49\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 14\n      }, this);\n    } else if (daysUntilDue <= 2) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"dashboard-status-badge\",\n        style: {\n          backgroundColor: '#ffc107'\n        },\n        children: [daysUntilDue, \" \\u0E27\\u0E31\\u0E19\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"dashboard-status-badge\",\n        style: {\n          backgroundColor: '#0dcaf0'\n        },\n        children: [daysUntilDue, \" \\u0E27\\u0E31\\u0E19\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 14\n      }, this);\n    }\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-dashboard\",\n      children: [/*#__PURE__*/_jsxDEV(AdminHeader, {\n        admin: admin,\n        onLogout: logout,\n        isCollapsed: isSidebarCollapsed,\n        onToggleSidebar: toggleSidebar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-dashboard__loading\",\n        children: [/*#__PURE__*/_jsxDEV(Spinner, {\n          animation: \"border\",\n          role: \"status\",\n          variant: \"primary\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"visually-hidden\",\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-3 text-muted\",\n          children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E23\\u0E27\\u0E1A\\u0E23\\u0E27\\u0E21\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(AdminHeader, {\n      admin: admin,\n      onLogout: logout,\n      isCollapsed: isSidebarCollapsed,\n      onToggleSidebar: toggleSidebar,\n      adminNotifications: adminNotifications,\n      markAdminOrdersSeen: markAdminOrdersSeen,\n      markAdminCustomersSeen: markAdminCustomersSeen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NotificationBell, {\n      adminNotifications: adminNotifications,\n      markAdminOrdersSeen: markAdminOrdersSeen,\n      markAdminCustomersSeen: markAdminCustomersSeen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      className: \"admin-dashboard__container\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"admin-dashboard__header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-dashboard__header-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"admin-dashboard__title\",\n              children: \"\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\\u0E01\\u0E32\\u0E23\\u0E0A\\u0E33\\u0E23\\u0E30\\u0E40\\u0E07\\u0E34\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"admin-dashboard__subtitle\",\n              children: \"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E07\\u0E27\\u0E14\\u0E01\\u0E32\\u0E23\\u0E0A\\u0E33\\u0E23\\u0E30\\u0E40\\u0E07\\u0E34\\u0E19\\u0E17\\u0E35\\u0E48\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E16\\u0E36\\u0E07\\u0E27\\u0E31\\u0E19\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\\u0E20\\u0E32\\u0E22\\u0E43\\u0E19 5 \\u0E27\\u0E31\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"admin-dashboard__header-meta\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"admin-dashboard__date\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-calendar3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 17\n              }, this), new Date().toLocaleDateString('th-TH', {\n                weekday: 'long',\n                year: 'numeric',\n                month: 'long',\n                day: 'numeric'\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this), lastFetchedAt && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"admin-dashboard__last-updated\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-clock\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 19\n              }, this), \"\\u0E2D\\u0E31\\u0E1B\\u0E40\\u0E14\\u0E15\\u0E25\\u0E48\\u0E32\\u0E2A\\u0E38\\u0E14: \", lastFetchedAt.toLocaleTimeString('th-TH')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-dashboard__header-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex align-items-center gap-2 flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex align-items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"fw-semibold\",\n                children: \"\\u0E08\\u0E32\\u0E01\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                className: \"form-control\",\n                value: startDate,\n                onChange: e => setStartDate(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex align-items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"fw-semibold\",\n                children: \"\\u0E16\\u0E36\\u0E07\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                className: \"form-control\",\n                value: endDate,\n                min: startDate,\n                onChange: e => setEndDate(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            className: \"admin-dashboard__refresh-btn\",\n            onClick: fetchUpcomingPayments,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-arrow-repeat\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this), \"\\u0E23\\u0E35\\u0E40\\u0E1F\\u0E23\\u0E0A\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), message.show && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: message.variant,\n        dismissible: true,\n        onClose: () => setMessage({\n          show: false\n        }),\n        className: \"mb-4\",\n        children: message.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: \"admin-dashboard__panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-dashboard__panel-header\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E17\\u0E35\\u0E48\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\\u0E01\\u0E32\\u0E23\\u0E0A\\u0E33\\u0E23\\u0E30\\u0E40\\u0E07\\u0E34\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E07\\u0E27\\u0E14\\u0E01\\u0E32\\u0E23\\u0E0A\\u0E33\\u0E23\\u0E30\\u0E40\\u0E07\\u0E34\\u0E19\\u0E17\\u0E35\\u0E48\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E16\\u0E36\\u0E07\\u0E27\\u0E31\\u0E19\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\\u0E20\\u0E32\\u0E22\\u0E43\\u0E19 5 \\u0E27\\u0E31\\u0E19 \\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14 \", installments.length.toLocaleString('th-TH'), \" \\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-dashboard__panel-body\",\n          children: installments.length > 0 ? /*#__PURE__*/_jsxDEV(Table, {\n            responsive: true,\n            hover: true,\n            className: \"admin-dashboard__table\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"#\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 318,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u0E40\\u0E25\\u0E02\\u0E17\\u0E35\\u0E48\\u0E04\\u0E33\\u0E2A\\u0E31\\u0E48\\u0E07\\u0E0B\\u0E37\\u0E49\\u0E2D\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u0E25\\u0E39\\u0E01\\u0E04\\u0E49\\u0E32\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E15\\u0E34\\u0E14\\u0E15\\u0E48\\u0E2D\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u0E07\\u0E27\\u0E14\\u0E17\\u0E35\\u0E48\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u0E22\\u0E2D\\u0E14\\u0E0A\\u0E33\\u0E23\\u0E30\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\\u0E0A\\u0E33\\u0E23\\u0E30\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u0E40\\u0E2B\\u0E25\\u0E37\\u0E2D\\u0E2D\\u0E35\\u0E01\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"text-end\",\n                  children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: installments.map((item, index) => {\n                var _item$order;\n                if (!item || !item.installment_id) {\n                  return null; // Skip invalid items\n                }\n                const daysUntilDue = getDaysUntilDue(item.payment_due_date);\n                const customer = item.customer || {};\n                const customerName = `${customer.customer_fname || ''} ${customer.customer_lname || ''}`.trim() || 'ไม่ระบุชื่อ';\n                const orderId = item.order_id || ((_item$order = item.order) === null || _item$order === void 0 ? void 0 : _item$order.order_id) || null;\n                const installmentId = item.installment_id;\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"fw-semibold\",\n                    children: index + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 343,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: orderId ? /*#__PURE__*/_jsxDEV(Button, {\n                      variant: \"link\",\n                      className: \"p-0 text-decoration-none fw-semibold\",\n                      style: {\n                        color: '#000'\n                      },\n                      onClick: () => handleViewOrder(orderId),\n                      children: [\"#\", orderId]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 346,\n                      columnNumber: 29\n                    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-muted\",\n                      children: \"-\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 355,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"admin-dashboard__customer-info\",\n                      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: customerName\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 360,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 359,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 358,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: customer.customer_tel || '-'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 363,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: item.installment_number || '-'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 364,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"admin-dashboard__amount\",\n                    children: formatCurrency(item.installment_amount || 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 365,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: formatDate(item.payment_due_date)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 366,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: getUrgencyBadge(daysUntilDue)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 367,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-end\",\n                    children: orderId && installmentId ? /*#__PURE__*/_jsxDEV(Button, {\n                      variant: \"outline-success\",\n                      size: \"sm\",\n                      className: \"admin-dashboard__action-btn admin-dashboard__action-btn--approve\",\n                      title: \"\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\\u0E01\\u0E32\\u0E23\\u0E0A\\u0E33\\u0E23\\u0E30\\u0E40\\u0E07\\u0E34\\u0E19\",\n                      disabled: actionLoadingId === installmentId,\n                      onClick: () => handleMarkPaid(orderId, installmentId),\n                      children: actionLoadingId === installmentId ? /*#__PURE__*/_jsxDEV(Spinner, {\n                        animation: \"border\",\n                        size: \"sm\",\n                        role: \"status\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"visually-hidden\",\n                          children: \"Processing...\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 380,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 379,\n                        columnNumber: 33\n                      }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"bi bi-check-circle\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 383,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 370,\n                      columnNumber: 29\n                    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-muted\",\n                      children: \"-\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 387,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 368,\n                    columnNumber: 25\n                  }, this)]\n                }, installmentId, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 23\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"admin-dashboard__empty-state\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-check-circle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E17\\u0E35\\u0E48\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E07\\u0E27\\u0E14\\u0E01\\u0E32\\u0E23\\u0E0A\\u0E33\\u0E23\\u0E30\\u0E40\\u0E07\\u0E34\\u0E19\\u0E17\\u0E35\\u0E48\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E16\\u0E36\\u0E07\\u0E27\\u0E31\\u0E19\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\\u0E20\\u0E32\\u0E22\\u0E43\\u0E19 5 \\u0E27\\u0E31\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 221,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminPaymentConfirmation, \"KhdmvIUf0m7WqfUjb1VhiZXWLzI=\", false, function () {\n  return [useNavigate];\n});\n_c = AdminPaymentConfirmation;\nvar _c;\n$RefreshReg$(_c, \"AdminPaymentConfirmation\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","Container","Card","Table","Badge","Button","Spinner","Alert","axios","AdminHeader","NotificationBell","jsxDEV","_jsxDEV","formatCurrency","value","number","Number","toLocaleString","minimumFractionDigits","maximumFractionDigits","formatDate","date","Date","isNaN","getTime","toLocaleDateString","year","month","day","getDaysUntilDue","dueDate","today","setHours","due","diffTime","diffDays","Math","ceil","AdminPaymentConfirmation","admin","logout","isSidebarCollapsed","toggleSidebar","adminNotifications","markAdminOrdersSeen","markAdminCustomersSeen","_s","navigate","installments","setInstallments","isLoading","setIsLoading","lastFetchedAt","setLastFetchedAt","message","setMessage","show","text","variant","actionLoadingId","setActionLoadingId","toDateInput","toISOString","split","defaultEnd","setDate","getDate","startDate","setStartDate","endDate","setEndDate","fetchUpcomingPayments","response","get","params","start_date","end_date","data","Array","isArray","error","_error$response","_error$response$data","console","adminToken","localStorage","getItem","tokenParts","length","payload","JSON","parse","atob","expirationTime","exp","now","removeItem","warn","defaults","headers","common","interval","setInterval","clearInterval","handleMarkPaid","orderId","installmentId","window","confirm","put","setTimeout","_error$response2","_error$response2$data","handleViewOrder","event","CustomEvent","detail","dispatchEvent","getUrgencyBadge","daysUntilDue","className","style","backgroundColor","children","fileName","_jsxFileName","lineNumber","columnNumber","onLogout","isCollapsed","onToggleSidebar","animation","role","fluid","weekday","toLocaleTimeString","type","onChange","e","target","min","onClick","dismissible","onClose","responsive","hover","map","item","index","_item$order","installment_id","payment_due_date","customer","customerName","customer_fname","customer_lname","trim","order_id","order","color","customer_tel","installment_number","installment_amount","size","title","disabled","_c","$RefreshReg$"],"sources":["D:/xampp/htdocs/Website_Sangswang/client/src/pages/admin/AdminPaymentConfirmation.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Card from 'react-bootstrap/Card';\r\nimport Table from 'react-bootstrap/Table';\r\nimport Badge from 'react-bootstrap/Badge';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport axios from 'axios';\r\nimport AdminHeader from '../../components/AdminHeader';\r\nimport NotificationBell from '../../components/NotificationBell';\r\nimport './AdminDashboard.css';\r\n\r\nconst formatCurrency = (value) => {\r\n  const number = Number(value) || 0;\r\n  return `฿${number.toLocaleString('th-TH', {\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0\r\n  })}`;\r\n};\r\n\r\nconst formatDate = (value) => {\r\n  if (!value) {\r\n    return '-';\r\n  }\r\n  const date = new Date(value);\r\n  if (Number.isNaN(date.getTime())) {\r\n    return '-';\r\n  }\r\n  return date.toLocaleDateString('th-TH', {\r\n    year: 'numeric',\r\n    month: 'short',\r\n    day: 'numeric'\r\n  });\r\n};\r\n\r\nconst getDaysUntilDue = (dueDate) => {\r\n  if (!dueDate) return null;\r\n  const today = new Date();\r\n  today.setHours(0, 0, 0, 0);\r\n  const due = new Date(dueDate);\r\n  due.setHours(0, 0, 0, 0);\r\n  const diffTime = due - today;\r\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n  return diffDays;\r\n};\r\n\r\nexport default function AdminPaymentConfirmation({\r\n  admin,\r\n  logout,\r\n  isSidebarCollapsed,\r\n  toggleSidebar,\r\n  adminNotifications,\r\n  markAdminOrdersSeen,\r\n  markAdminCustomersSeen\r\n}) {\r\n  const navigate = useNavigate();\r\n  const [installments, setInstallments] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [lastFetchedAt, setLastFetchedAt] = useState(null);\r\n  const [message, setMessage] = useState({ show: false, text: '', variant: '' });\r\n  const [actionLoadingId, setActionLoadingId] = useState(null);\r\n  const toDateInput = (date) => date.toISOString().split('T')[0];\r\n  const today = new Date();\r\n  today.setHours(0, 0, 0, 0);\r\n  const defaultEnd = new Date(today);\r\n  defaultEnd.setDate(defaultEnd.getDate() + 5);\r\n  const [startDate, setStartDate] = useState(toDateInput(today));\r\n  const [endDate, setEndDate] = useState(toDateInput(defaultEnd));\r\n\r\n  const fetchUpcomingPayments = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await axios.get('/api/admin/payment-confirmations', {\r\n        params: {\r\n          start_date: startDate,\r\n          end_date: endDate\r\n        }\r\n      });\r\n      // ตรวจสอบว่า response.data เป็น array\r\n      const data = Array.isArray(response.data) ? response.data : [];\r\n      setInstallments(data);\r\n      setLastFetchedAt(new Date());\r\n    } catch (error) {\r\n      console.error('Error fetching upcoming payments:', error);\r\n      setMessage({\r\n        show: true,\r\n        text: error.response?.data?.error || 'ไม่สามารถโหลดข้อมูลได้',\r\n        variant: 'danger'\r\n      });\r\n      // ตั้งค่าเป็น array ว่างเมื่อเกิด error\r\n      setInstallments([]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [startDate, endDate]);\r\n\r\n  useEffect(() => {\r\n    // ตรวจสอบว่ามี token ก่อนเรียก API\r\n    const adminToken = localStorage.getItem('admin_token');\r\n    if (!adminToken) {\r\n      setMessage({\r\n        show: true,\r\n        text: 'กรุณาเข้าสู่ระบบใหม่',\r\n        variant: 'danger'\r\n      });\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n    \r\n    // ตรวจสอบ token expiration (ถ้าเป็น JWT)\r\n    try {\r\n      const tokenParts = adminToken.split('.');\r\n      if (tokenParts.length === 3) {\r\n        const payload = JSON.parse(atob(tokenParts[1]));\r\n        const expirationTime = payload.exp * 1000; // Convert to milliseconds\r\n        if (Date.now() >= expirationTime) {\r\n          setMessage({\r\n            show: true,\r\n            text: 'Session หมดอายุ กรุณาเข้าสู่ระบบใหม่',\r\n            variant: 'danger'\r\n          });\r\n          setIsLoading(false);\r\n          // ลบ token ที่หมดอายุ\r\n          localStorage.removeItem('admin_token');\r\n          localStorage.removeItem('admin_user');\r\n          return;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      // ถ้า parse ไม่ได้ อาจไม่ใช่ JWT หรือ format ผิด\r\n      console.warn('Token validation error:', error);\r\n    }\r\n    \r\n    // ตั้งค่า Authorization header ก่อนเรียก API\r\n    axios.defaults.headers.common['Authorization'] = `Bearer ${adminToken}`;\r\n    fetchUpcomingPayments();\r\n    \r\n    // Auto-refresh every 30 seconds\r\n    const interval = setInterval(() => {\r\n      fetchUpcomingPayments();\r\n    }, 30000);\r\n    \r\n    return () => clearInterval(interval);\r\n  }, [fetchUpcomingPayments]);\r\n\r\n  const handleMarkPaid = async (orderId, installmentId) => {\r\n    if (!window.confirm('ยืนยันการบันทึกว่าชำระเงินแล้ว?')) {\r\n      return;\r\n    }\r\n\r\n    setActionLoadingId(installmentId);\r\n    try {\r\n      await axios.put(`/api/orders/${orderId}/installments/${installmentId}/mark-paid`);\r\n      setMessage({\r\n        show: true,\r\n        text: 'บันทึกสถานะการชำระเงินเรียบร้อยแล้ว',\r\n        variant: 'success'\r\n      });\r\n      \r\n      // รีเฟรชข้อมูล\r\n      await fetchUpcomingPayments();\r\n      \r\n      setTimeout(() => setMessage({ show: false }), 3000);\r\n    } catch (error) {\r\n      console.error('Error marking installment paid:', error);\r\n      setMessage({\r\n        show: true,\r\n        text: error.response?.data?.error || 'ไม่สามารถบันทึกสถานะการชำระเงินได้',\r\n        variant: 'danger'\r\n      });\r\n      setTimeout(() => setMessage({ show: false }), 5000); // Error message แสดงนานกว่า\r\n    } finally {\r\n      setActionLoadingId(null);\r\n    }\r\n  };\r\n\r\n  const handleViewOrder = (orderId) => {\r\n    navigate(`/admin/orders`);\r\n    // เปิด order detail ในหน้า orders\r\n    setTimeout(() => {\r\n      const event = new CustomEvent('admin-view-order', { detail: { orderId } });\r\n      window.dispatchEvent(event);\r\n    }, 100);\r\n  };\r\n\r\n  const getUrgencyBadge = (daysUntilDue) => {\r\n    if (daysUntilDue === null) return null;\r\n    if (daysUntilDue < 0) {\r\n      return <span className=\"dashboard-status-badge\" style={{ backgroundColor: '#dc3545' }}>เลยกำหนด</span>;\r\n    } else if (daysUntilDue === 0) {\r\n      return <span className=\"dashboard-status-badge\" style={{ backgroundColor: '#ffc107' }}>วันนี้</span>;\r\n    } else if (daysUntilDue <= 2) {\r\n      return <span className=\"dashboard-status-badge\" style={{ backgroundColor: '#ffc107' }}>{daysUntilDue} วัน</span>;\r\n    } else {\r\n      return <span className=\"dashboard-status-badge\" style={{ backgroundColor: '#0dcaf0' }}>{daysUntilDue} วัน</span>;\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"admin-dashboard\">\r\n        <AdminHeader\r\n          admin={admin}\r\n          onLogout={logout}\r\n          isCollapsed={isSidebarCollapsed}\r\n          onToggleSidebar={toggleSidebar}\r\n        />\r\n        <div className=\"admin-dashboard__loading\">\r\n          <Spinner animation=\"border\" role=\"status\" variant=\"primary\">\r\n            <span className=\"visually-hidden\">Loading...</span>\r\n          </Spinner>\r\n          <p className=\"mt-3 text-muted\">กำลังรวบรวมข้อมูล...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"admin-dashboard\">\r\n      <AdminHeader\r\n        admin={admin}\r\n        onLogout={logout}\r\n        isCollapsed={isSidebarCollapsed}\r\n        onToggleSidebar={toggleSidebar}\r\n        adminNotifications={adminNotifications}\r\n        markAdminOrdersSeen={markAdminOrdersSeen}\r\n        markAdminCustomersSeen={markAdminCustomersSeen}\r\n      />\r\n\r\n      <NotificationBell\r\n        adminNotifications={adminNotifications}\r\n        markAdminOrdersSeen={markAdminOrdersSeen}\r\n        markAdminCustomersSeen={markAdminCustomersSeen}\r\n      />\r\n\r\n      <Container fluid className=\"admin-dashboard__container\">\r\n        {/* Header Section */}\r\n        <section className=\"admin-dashboard__header\">\r\n          <div className=\"admin-dashboard__header-content\">\r\n            <div>\r\n              <h1 className=\"admin-dashboard__title\">ยืนยันการชำระเงิน</h1>\r\n              <p className=\"admin-dashboard__subtitle\">รายการงวดการชำระเงินที่กำลังถึงวันกำหนดภายใน 5 วัน</p>\r\n            </div>\r\n            <div className=\"admin-dashboard__header-meta\">\r\n              <span className=\"admin-dashboard__date\">\r\n                <i className=\"bi bi-calendar3\"></i>\r\n                {new Date().toLocaleDateString('th-TH', {\r\n                  weekday: 'long',\r\n                  year: 'numeric',\r\n                  month: 'long',\r\n                  day: 'numeric'\r\n                })}\r\n              </span>\r\n              {lastFetchedAt && (\r\n                <span className=\"admin-dashboard__last-updated\">\r\n                  <i className=\"bi bi-clock\"></i>\r\n                  อัปเดตล่าสุด: {lastFetchedAt.toLocaleTimeString('th-TH')}\r\n                </span>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"admin-dashboard__header-actions\">\r\n            <div className=\"d-flex align-items-center gap-2 flex-wrap\">\r\n              <div className=\"d-flex align-items-center gap-2\">\r\n                <label className=\"fw-semibold\">จาก</label>\r\n                <input\r\n                  type=\"date\"\r\n                  className=\"form-control\"\r\n                  value={startDate}\r\n                  onChange={(e) => setStartDate(e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"d-flex align-items-center gap-2\">\r\n                <label className=\"fw-semibold\">ถึง</label>\r\n                <input\r\n                  type=\"date\"\r\n                  className=\"form-control\"\r\n                  value={endDate}\r\n                  min={startDate}\r\n                  onChange={(e) => setEndDate(e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n            <Button variant=\"primary\" className=\"admin-dashboard__refresh-btn\" onClick={fetchUpcomingPayments}>\r\n              <i className=\"bi bi-arrow-repeat\"></i>\r\n              รีเฟรชข้อมูล\r\n            </Button>\r\n          </div>\r\n        </section>\r\n\r\n        {message.show && (\r\n          <Alert\r\n            variant={message.variant}\r\n            dismissible\r\n            onClose={() => setMessage({ show: false })}\r\n            className=\"mb-4\"\r\n          >\r\n            {message.text}\r\n          </Alert>\r\n        )}\r\n\r\n        {/* Main Content - Payment Confirmations */}\r\n        <Card className=\"admin-dashboard__panel\">\r\n          <div className=\"admin-dashboard__panel-header\">\r\n            <div>\r\n              <h2>รายการที่ต้องยืนยันการชำระเงิน</h2>\r\n              <p>รายการงวดการชำระเงินที่กำลังถึงวันกำหนดภายใน 5 วัน ทั้งหมด {installments.length.toLocaleString('th-TH')} รายการ</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"admin-dashboard__panel-body\">\r\n            {installments.length > 0 ? (\r\n              <Table responsive hover className=\"admin-dashboard__table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>#</th>\r\n                    <th>เลขที่คำสั่งซื้อ</th>\r\n                    <th>ลูกค้า</th>\r\n                    <th>เบอร์ติดต่อ</th>\r\n                    <th>งวดที่</th>\r\n                    <th>ยอดชำระ</th>\r\n                    <th>กำหนดชำระ</th>\r\n                    <th>เหลืออีก</th>\r\n                    <th className=\"text-end\">จัดการ</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {installments.map((item, index) => {\r\n                    if (!item || !item.installment_id) {\r\n                      return null; // Skip invalid items\r\n                    }\r\n                    \r\n                    const daysUntilDue = getDaysUntilDue(item.payment_due_date);\r\n                    const customer = item.customer || {};\r\n                    const customerName = `${customer.customer_fname || ''} ${customer.customer_lname || ''}`.trim() || 'ไม่ระบุชื่อ';\r\n                    const orderId = item.order_id || item.order?.order_id || null;\r\n                    const installmentId = item.installment_id;\r\n                    \r\n                    return (\r\n                      <tr key={installmentId}>\r\n                        <td className=\"fw-semibold\">{index + 1}</td>\r\n                        <td>\r\n                          {orderId ? (\r\n                            <Button\r\n                              variant=\"link\"\r\n                              className=\"p-0 text-decoration-none fw-semibold\"\r\n                              style={{ color: '#000' }}\r\n                              onClick={() => handleViewOrder(orderId)}\r\n                            >\r\n                              #{orderId}\r\n                            </Button>\r\n                          ) : (\r\n                            <span className=\"text-muted\">-</span>\r\n                          )}\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"admin-dashboard__customer-info\">\r\n                            <strong>{customerName}</strong>\r\n                          </div>\r\n                        </td>\r\n                        <td>{customer.customer_tel || '-'}</td>\r\n                        <td>{item.installment_number || '-'}</td>\r\n                        <td className=\"admin-dashboard__amount\">{formatCurrency(item.installment_amount || 0)}</td>\r\n                        <td>{formatDate(item.payment_due_date)}</td>\r\n                        <td>{getUrgencyBadge(daysUntilDue)}</td>\r\n                        <td className=\"text-end\">\r\n                          {orderId && installmentId ? (\r\n                            <Button\r\n                              variant=\"outline-success\"\r\n                              size=\"sm\"\r\n                              className=\"admin-dashboard__action-btn admin-dashboard__action-btn--approve\"\r\n                              title=\"ยืนยันการชำระเงิน\"\r\n                              disabled={actionLoadingId === installmentId}\r\n                              onClick={() => handleMarkPaid(orderId, installmentId)}\r\n                            >\r\n                              {actionLoadingId === installmentId ? (\r\n                                <Spinner animation=\"border\" size=\"sm\" role=\"status\">\r\n                                  <span className=\"visually-hidden\">Processing...</span>\r\n                                </Spinner>\r\n                              ) : (\r\n                                <i className=\"bi bi-check-circle\"></i>\r\n                              )}\r\n                            </Button>\r\n                          ) : (\r\n                            <span className=\"text-muted\">-</span>\r\n                          )}\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </Table>\r\n            ) : (\r\n              <div className=\"admin-dashboard__empty-state\">\r\n                <i className=\"bi bi-check-circle\"></i>\r\n                <strong>ไม่มีรายการที่ต้องยืนยัน</strong>\r\n                <p>ไม่มีงวดการชำระเงินที่กำลังถึงวันกำหนดภายใน 5 วัน</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </Card>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}